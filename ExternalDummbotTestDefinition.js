"use strict";var Di=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Fo={exports:{}};(function(jo,Ni){(function(kr,De){jo.exports=De()})(typeof self<"u"?self:Di,function(){return function(kr){var De={};function Q($){if(De[$])return De[$].exports;var oe=De[$]={i:$,l:!1,exports:{}};return kr[$].call(oe.exports,oe,oe.exports,Q),oe.l=!0,oe.exports}return Q.m=kr,Q.c=De,Q.d=function($,oe,_){Q.o($,oe)||Object.defineProperty($,oe,{enumerable:!0,get:_})},Q.r=function($){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty($,Symbol.toStringTag,{value:"Module"}),Object.defineProperty($,"__esModule",{value:!0})},Q.t=function($,oe){if(1&oe&&($=Q($)),8&oe||4&oe&&typeof $=="object"&&$&&$.__esModule)return $;var _=Object.create(null);if(Q.r(_),Object.defineProperty(_,"default",{enumerable:!0,value:$}),2&oe&&typeof $!="string")for(var Qe in $)Q.d(_,Qe,function(en){return $[en]}.bind(null,Qe));return _},Q.n=function($){var oe=$&&$.__esModule?function(){return $.default}:function(){return $};return Q.d(oe,"a",oe),oe},Q.o=function($,oe){return{}.hasOwnProperty.call($,oe)},Q.p="",Q(Q.s=0)}([function(kr,De,Q){Q.r(De),Q.d(De,"PopupOpenError",function(){return Bn}),Q.d(De,"create",function(){return wi}),Q.d(De,"destroy",function(){return pi}),Q.d(De,"destroyComponents",function(){return Eo}),Q.d(De,"destroyAll",function(){return Po}),Q.d(De,"PROP_TYPE",function(){return k}),Q.d(De,"PROP_SERIALIZATION",function(){return On}),Q.d(De,"CONTEXT",function(){return le}),Q.d(De,"EVENT",function(){return he});function $(e,r){return($=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n})(e,r)}function oe(e,r){e.prototype=Object.create(r.prototype),e.prototype.constructor=e,$(e,r)}function _(){return(_=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var t in n)({}).hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e}).apply(this,arguments)}function Qe(e){try{if(!e)return!1;if(typeof Promise<"u"&&e instanceof Promise)return!0;if(typeof window<"u"&&typeof window.Window=="function"&&e instanceof window.Window||typeof window<"u"&&typeof window.constructor=="function"&&e instanceof window.constructor)return!1;var r={}.toString;if(r){var n=r.call(e);if(n==="[object Window]"||n==="[object global]"||n==="[object DOMWindow]")return!1}if(typeof e.then=="function")return!0}catch{return!1}return!1}var en=[],Tr=[],Wn=0,zr;function ct(){if(!Wn&&zr){var e=zr;zr=null,e.resolve()}}function Sn(){Wn+=1}function Mr(){Wn-=1,ct()}var p=function(){function e(n){var t=this;if(this.resolved=void 0,this.rejected=void 0,this.errorHandled=void 0,this.value=void 0,this.error=void 0,this.handlers=void 0,this.dispatching=void 0,this.stack=void 0,this.resolved=!1,this.rejected=!1,this.errorHandled=!1,this.handlers=[],n){var o,i,a=!1,s=!1,u=!1;Sn();try{n(function(c){u?t.resolve(c):(a=!0,o=c)},function(c){u?t.reject(c):(s=!0,i=c)})}catch(c){Mr(),this.reject(c);return}Mr(),u=!0,a?this.resolve(o):s&&this.reject(i)}}var r=e.prototype;return r.resolve=function(n){if(this.resolved||this.rejected)return this;if(Qe(n))throw new Error("Can not resolve promise with another promise");return this.resolved=!0,this.value=n,this.dispatch(),this},r.reject=function(n){var t=this;if(this.resolved||this.rejected)return this;if(Qe(n))throw new Error("Can not reject promise with another promise");if(!n){var o=n&&typeof n.toString=="function"?n.toString():{}.toString.call(n);n=new Error("Expected reject to be called with Error, got "+o)}return this.rejected=!0,this.error=n,this.errorHandled||setTimeout(function(){t.errorHandled||function(i,a){if(en.indexOf(i)===-1){en.push(i),setTimeout(function(){throw i},1);for(var s=0;s<Tr.length;s++)Tr[s](i,a)}}(n,t)},1),this.dispatch(),this},r.asyncReject=function(n){return this.errorHandled=!0,this.reject(n),this},r.dispatch=function(){var n=this.resolved,t=this.rejected,o=this.handlers;if(!this.dispatching&&(n||t)){this.dispatching=!0,Sn();for(var i=function(h,v){return h.then(function(m){v.resolve(m)},function(m){v.reject(m)})},a=0;a<o.length;a++){var s=o[a],u=s.onSuccess,c=s.onError,d=s.promise,f=void 0;if(n)try{f=u?u(this.value):this.value}catch(h){d.reject(h);continue}else if(t){if(!c){d.reject(this.error);continue}try{f=c(this.error)}catch(h){d.reject(h);continue}}if(f instanceof e&&(f.resolved||f.rejected)){var l=f;l.resolved?d.resolve(l.value):d.reject(l.error),l.errorHandled=!0}else Qe(f)?f instanceof e&&(f.resolved||f.rejected)?f.resolved?d.resolve(f.value):d.reject(f.error):i(f,d):d.resolve(f)}o.length=0,this.dispatching=!1,Mr()}},r.then=function(n,t){if(n&&typeof n!="function"&&!n.call)throw new Error("Promise.then expected a function for success handler");if(t&&typeof t!="function"&&!t.call)throw new Error("Promise.then expected a function for error handler");var o=new e;return this.handlers.push({promise:o,onSuccess:n,onError:t}),this.errorHandled=!0,this.dispatch(),o},r.catch=function(n){return this.then(void 0,n)},r.finally=function(n){if(n&&typeof n!="function"&&!n.call)throw new Error("Promise.finally expected a function");return this.then(function(t){return e.try(n).then(function(){return t})},function(t){return e.try(n).then(function(){throw t})})},r.timeout=function(n,t){var o=this;if(this.resolved||this.rejected)return this;var i=setTimeout(function(){o.resolved||o.rejected||o.reject(t||new Error("Promise timed out after "+n+"ms"))},n);return this.then(function(a){return clearTimeout(i),a})},r.toPromise=function(){if(typeof Promise>"u")throw new TypeError("Could not find Promise");return Promise.resolve(this)},r.lazy=function(){return this.errorHandled=!0,this},e.resolve=function(n){return n instanceof e?n:Qe(n)?new e(function(t,o){return n.then(t,o)}):new e().resolve(n)},e.reject=function(n){return new e().reject(n)},e.asyncReject=function(n){return new e().asyncReject(n)},e.all=function(n){var t=new e,o=n.length,i=[].slice();if(!o)return t.resolve(i),t;for(var a=function(c,d,f){return d.then(function(l){i[c]=l,(o-=1)==0&&t.resolve(i)},function(l){f.reject(l)})},s=0;s<n.length;s++){var u=n[s];if(u instanceof e){if(u.resolved){i[s]=u.value,o-=1;continue}}else if(!Qe(u)){i[s]=u,o-=1;continue}a(s,e.resolve(u),t)}return o===0&&t.resolve(i),t},e.hash=function(n){var t={},o=[],i=function(s){if(n.hasOwnProperty(s)){var u=n[s];Qe(u)?o.push(u.then(function(c){t[s]=c})):t[s]=u}};for(var a in n)i(a);return e.all(o).then(function(){return t})},e.map=function(n,t){return e.all(n.map(t))},e.onPossiblyUnhandledException=function(n){return function(t){return Tr.push(t),{cancel:function(){Tr.splice(Tr.indexOf(t),1)}}}(n)},e.try=function(n,t,o){if(n&&typeof n!="function"&&!n.call)throw new Error("Promise.try expected a function");var i;Sn();try{i=n.apply(t,o||[])}catch(a){return Mr(),e.reject(a)}return Mr(),e.resolve(i)},e.delay=function(n){return new e(function(t){setTimeout(t,n)})},e.isPromise=function(n){return!!(n&&n instanceof e)||Qe(n)},e.flush=function(){return function(n){var t=zr=zr||new n;return ct(),t}(e)},e}();function Fr(e){return{}.toString.call(e)==="[object RegExp]"}var rn={IFRAME:"iframe",POPUP:"popup"},gr=`Call was rejected by callee.\r
`;function st(e){return e===void 0&&(e=window),e.location.protocol}function dt(e){if(e===void 0&&(e=window),e.mockDomain){var r=e.mockDomain.split("//")[0];if(r)return r}return st(e)}function ft(e){return e===void 0&&(e=window),dt(e)==="about:"}function Ze(e){if(e===void 0&&(e=window),e)try{if(e.parent&&e.parent!==e)return e.parent}catch{}}function cr(e){if(e===void 0&&(e=window),e&&!Ze(e))try{return e.opener}catch{}}function nn(e){try{return!0}catch{}return!1}function tn(e){e===void 0&&(e=window);var r=e.location;if(!r)throw new Error("Can not read window location");var n=st(e);if(!n)throw new Error("Can not read window protocol");if(n==="file:")return"file://";if(n==="about:"){var t=Ze(e);return t&&nn()?tn(t):"about://"}var o=r.host;if(!o)throw new Error("Can not read window host");return n+"//"+o}function V(e){e===void 0&&(e=window);var r=tn(e);return r&&e.mockDomain&&e.mockDomain.indexOf("mock:")===0?e.mockDomain:r}function ie(e){if(!function(r){try{if(r===window)return!0}catch{}try{var n=Object.getOwnPropertyDescriptor(r,"location");if(n&&n.enumerable===!1)return!1}catch{}try{if(ft(r)&&nn())return!0}catch{}try{if(function(t){return t===void 0&&(t=window),dt(t)==="mock:"}(r)&&nn())return!0}catch{}try{if(tn(r)===tn(window))return!0}catch{}return!1}(e))return!1;try{if(e===window||ft(e)&&nn()||V(window)===V(e))return!0}catch{}return!1}function qe(e){if(!ie(e))throw new Error("Expected window to be same domain");return e}function lt(e,r){if(!e||!r)return!1;var n=Ze(r);return n?n===e:function(t){var o=[];try{for(;t.parent!==t;)o.push(t.parent),t=t.parent}catch{}return o}(r).indexOf(e)!==-1}function on(e){var r=[],n;try{n=e.frames}catch{n=e}var t;try{t=n.length}catch{}if(t===0)return r;if(t){for(var o=0;o<t;o++){var i=void 0;try{i=n[o]}catch{continue}r.push(i)}return r}for(var a=0;a<100;a++){var s=void 0;try{s=n[a]}catch{return r}if(!s)return r;r.push(s)}return r}function an(e){for(var r=[],n=0,t=on(e);n<t.length;n++){var o=t[n];r.push(o);for(var i=0,a=an(o);i<a.length;i++)r.push(a[i])}return r}function Dr(e){e===void 0&&(e=window);try{if(e.top)return e.top}catch{}if(Ze(e)===e)return e;try{if(lt(window,e)&&window.top)return window.top}catch{}try{if(lt(e,window)&&window.top)return window.top}catch{}for(var r=0,n=an(e);r<n.length;r++){var t=n[r];try{if(t.top)return t.top}catch{}if(Ze(t)===t)return t}}function Rr(e){var r=Dr(e);if(!r)throw new Error("Can not determine top window");var n=[].concat(an(r),[r]);return n.indexOf(e)===-1&&(n=[].concat(n,[e],an(e))),n}var Ur=[],Dn=[];function fe(e,r){r===void 0&&(r=!0);try{if(e===window)return!1}catch{return!0}try{if(!e)return!0}catch{return!0}try{if(e.closed)return!0}catch(o){return!o||o.message!==gr}if(r&&ie(e))try{if(e.mockclosed)return!0}catch{}try{if(!e.parent||!e.top)return!0}catch{}var n=function(o,i){for(var a=0;a<o.length;a++)try{if(o[a]===i)return a}catch{}return-1}(Ur,e);if(n!==-1){var t=Dn[n];if(t&&function(o){if(!o.contentWindow||!o.parentNode)return!0;var i=o.ownerDocument;if(i&&i.documentElement&&!i.documentElement.contains(o)){for(var a=o;a.parentNode&&a.parentNode!==a;)a=a.parentNode;if(!a.host||!i.documentElement.contains(a.host))return!0}return!1}(t))return!0}return!1}function ht(e){return(e=e||window).navigator.mockUserAgent||e.navigator.userAgent}function un(e,r){for(var n=on(e),t=0;t<n.length;t++){var o=n[t];try{if(ie(o)&&o.name===r&&n.indexOf(o)!==-1)return o}catch{}}try{if(n.indexOf(e.frames[r])!==-1)return e.frames[r]}catch{}try{if(n.indexOf(e[r])!==-1)return e[r]}catch{}}function vt(e,r){return e===cr(r)}function jr(e){return e===void 0&&(e=window),cr(e=e||window)||Ze(e)||void 0}function Rn(e,r){for(var n=0;n<e.length;n++)for(var t=e[n],o=0;o<r.length;o++)if(t===r[o])return!0;return!1}function Nn(e){e===void 0&&(e=window);for(var r=0,n=e;n;)(n=Ze(n))&&(r+=1);return r}function cn(e,r){var n=Dr(e)||e,t=Dr(r)||r;try{if(n&&t)return n===t}catch{}var o=Rr(e),i=Rr(r);if(Rn(o,i))return!0;var a=cr(n),s=cr(t);return a&&Rn(Rr(a),i)||s&&Rn(Rr(s),o),!1}function $e(e,r){if(typeof e=="string"){if(typeof r=="string")return e==="*"||r===e;if(Fr(r)||Array.isArray(r))return!1}return Fr(e)?Fr(r)?e.toString()===r.toString():!Array.isArray(r)&&!!r.match(e):!!Array.isArray(e)&&(Array.isArray(r)?JSON.stringify(e)===JSON.stringify(r):!Fr(r)&&e.some(function(n){return $e(n,r)}))}function tr(e){return e.match(/^(https?|mock|file):\/\//)?e.split("/").slice(0,3).join("/"):V()}function wt(e,r,n,t){n===void 0&&(n=1e3),t===void 0&&(t=1/0);var o;return function i(){if(fe(e))return o&&clearTimeout(o),r();t<=0?clearTimeout(o):(t-=n,o=setTimeout(i,n))}(),{cancel:function(){o&&clearTimeout(o)}}}function yr(e){try{if(e===window)return!0}catch(r){if(r&&r.message===gr)return!0}try{if({}.toString.call(e)==="[object Window]")return!0}catch(r){if(r&&r.message===gr)return!0}try{if(window.Window&&e instanceof window.Window)return!0}catch(r){if(r&&r.message===gr)return!0}try{if(e&&e.self===e)return!0}catch(r){if(r&&r.message===gr)return!0}try{if(e&&e.parent===e)return!0}catch(r){if(r&&r.message===gr)return!0}try{if(e&&e.top===e)return!0}catch(r){if(r&&r.message===gr)return!0}try{if(e&&e.__cross_domain_utils_window_check__==="__unlikely_value__")return!1}catch{return!0}try{if("postMessage"in e&&"self"in e&&"location"in e)return!0}catch{}return!1}function In(e){if(r=tr(e),r.indexOf("mock:")!==0)return e;var r;throw new Error("Mock urls not supported out of test mode")}function pt(e){if(ie(e))return qe(e).frameElement;for(var r=0,n=document.querySelectorAll("iframe");r<n.length;r++){var t=n[r];if(t&&t.contentWindow&&t.contentWindow===e)return t}}function mt(e){if(function(n){return n===void 0&&(n=window),!!Ze(n)}(e)){var r=pt(e);if(r&&r.parentElement){r.parentElement.removeChild(r);return}}try{e.close()}catch{}}function sn(e,r){for(var n=0;n<e.length;n++)try{if(e[n]===r)return n}catch{}return-1}var dn=function(){function e(){if(this.name=void 0,this.weakmap=void 0,this.keys=void 0,this.values=void 0,this.name="__weakmap_"+(1e9*Math.random()>>>0)+"__",function(){if(typeof WeakMap>"u"||Object.freeze===void 0)return!1;try{var n=new WeakMap,t={};return Object.freeze(t),n.set(t,"__testvalue__"),n.get(t)==="__testvalue__"}catch{return!1}}())try{this.weakmap=new WeakMap}catch{}this.keys=[],this.values=[]}var r=e.prototype;return r._cleanupClosedWindows=function(){for(var n=this.weakmap,t=this.keys,o=0;o<t.length;o++){var i=t[o];if(yr(i)&&fe(i)){if(n)try{n.delete(i)}catch{}t.splice(o,1),this.values.splice(o,1),o-=1}}},r.isSafeToReadWrite=function(n){return!yr(n)},r.set=function(n,t){if(!n)throw new Error("WeakMap expected key");var o=this.weakmap;if(o)try{o.set(n,t)}catch{delete this.weakmap}if(this.isSafeToReadWrite(n))try{var i=this.name,a=n[i];a&&a[0]===n?a[1]=t:Object.defineProperty(n,i,{value:[n,t],writable:!0});return}catch{}this._cleanupClosedWindows();var s=this.keys,u=this.values,c=sn(s,n);c===-1?(s.push(n),u.push(t)):u[c]=t},r.get=function(n){if(!n)throw new Error("WeakMap expected key");var t=this.weakmap;if(t)try{if(t.has(n))return t.get(n)}catch{delete this.weakmap}if(this.isSafeToReadWrite(n))try{var o=n[this.name];return o&&o[0]===n?o[1]:void 0}catch{}this._cleanupClosedWindows();var i=sn(this.keys,n);if(i!==-1)return this.values[i]},r.delete=function(n){if(!n)throw new Error("WeakMap expected key");var t=this.weakmap;if(t)try{t.delete(n)}catch{delete this.weakmap}if(this.isSafeToReadWrite(n))try{var o=n[this.name];o&&o[0]===n&&(o[0]=o[1]=void 0)}catch{}this._cleanupClosedWindows();var i=this.keys,a=sn(i,n);a!==-1&&(i.splice(a,1),this.values.splice(a,1))},r.has=function(n){if(!n)throw new Error("WeakMap expected key");var t=this.weakmap;if(t)try{if(t.has(n))return!0}catch{delete this.weakmap}if(this.isSafeToReadWrite(n))try{var o=n[this.name];return!(!o||o[0]!==n)}catch{}return this._cleanupClosedWindows(),sn(this.keys,n)!==-1},r.getOrSet=function(n,t){if(this.has(n))return this.get(n);var o=t();return this.set(n,o),o},e}();function gt(e){return(gt=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)})(e)}function Lo(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function yt(e,r,n){return(yt=Lo()?Reflect.construct:function(t,o,i){var a=[null];a.push.apply(a,o);var s=new(Function.bind.apply(t,a));return i&&$(s,i.prototype),s}).apply(null,arguments)}function Et(e){var r=typeof Map=="function"?new Map:void 0;return(Et=function(n){if(n===null||(t=n,Function.toString.call(t).indexOf("[native code]")===-1))return n;var t;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(r!==void 0){if(r.has(n))return r.get(n);r.set(n,o)}function o(){return yt(n,arguments,gt(this).constructor)}return o.prototype=Object.create(n.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),$(o,n)})(e)}function An(e){return e.name||e.__name__||e.displayName||"anonymous"}function Tn(e,r){try{delete e.name,e.name=r}catch{}return e.__name__=e.displayName=r,e}function zn(e){if(typeof btoa=="function")return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,function(r,n){return String.fromCharCode(parseInt(n,16))})).replace(/[=]/g,"");if(typeof Buffer<"u")return Buffer.from(e,"utf8").toString("base64").replace(/[=]/g,"");throw new Error("Can not find window.btoa or Buffer")}function Re(){var e="0123456789abcdef";return"uid_"+"xxxxxxxxxx".replace(/./g,function(){return e.charAt(Math.floor(Math.random()*e.length))})+"_"+zn(new Date().toISOString().slice(11,19).replace("T",".")).replace(/[^a-zA-Z0-9]/g,"").toLowerCase()}var fn;function Mn(e){try{return JSON.stringify([].slice.call(e),function(r,n){return typeof n=="function"?"memoize["+function(t){if(fn=fn||new dn,t==null||typeof t!="object"&&typeof t!="function")throw new Error("Invalid object");var o=fn.get(t);return o||(o=typeof t+":"+Re(),fn.set(t,o)),o}(n)+"]":n})}catch{throw new Error("Arguments not serializable -- can not be used to memoize")}}function Bo(){return{}}var Lr=0,Pt=0;function sr(e,r){r===void 0&&(r={});var n=r.thisNamespace,t=n!==void 0&&n,o=r.time,i,a,s=Lr;Lr+=1;var u=function(){for(var c=arguments.length,d=new Array(c),f=0;f<c;f++)d[f]=arguments[f];s<Pt&&(i=null,a=null,s=Lr,Lr+=1);var l;l=t?(a=a||new dn).getOrSet(this,Bo):i=i||{};var h=Mn(d),v=l[h];if(v&&o&&Date.now()-v.time<o&&(delete l[h],v=null),v)return v.value;var m=Date.now(),g=e.apply(this,arguments);return l[h]={time:m,value:g},g};return u.reset=function(){i=null,a=null},Tn(u,(r.name||An(e))+"::memoized")}sr.clear=function(){Pt=Lr};function qo(e){var r={};function n(){for(var t=arguments,o=this,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];var u=Mn(a);return r.hasOwnProperty(u)||(r[u]=p.try(function(){return e.apply(o,t)}).finally(function(){delete r[u]})),r[u]}return n.reset=function(){r={}},Tn(n,An(e)+"::promiseMemoized")}function ne(){}function ln(e){var r=!1;return Tn(function(){if(!r)return r=!0,e.apply(this,arguments)},An(e)+"::once")}function Nr(e,r){if(r===void 0&&(r=1),r>=3)return"stringifyError stack overflow";try{if(!e)return"<unknown error: "+{}.toString.call(e)+">";if(typeof e=="string")return e;if(e instanceof Error){var n=e&&e.stack,t=e&&e.message;if(n&&t)return n.indexOf(t)!==-1?n:t+`
`+n;if(n)return n;if(t)return t}return e&&e.toString&&typeof e.toString=="function"?e.toString():{}.toString.call(e)}catch(o){return"Error while stringifying error: "+Nr(o,r+1)}}function Br(e){return typeof e=="string"?e:e&&e.toString&&typeof e.toString=="function"?e.toString():{}.toString.call(e)}function Ir(e,r){if(!r)return e;if(Object.assign)return Object.assign(e,r);for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n]);return e}sr(function(e){if(Object.values)return Object.values(e);var r=[];for(var n in e)e.hasOwnProperty(n)&&r.push(e[n]);return r});function $o(e){return e}function qr(e,r){var n;return function t(){n=setTimeout(function(){e(),t()},r)}(),{cancel:function(){clearTimeout(n)}}}function Fn(e){return e.replace(/-([a-z])/g,function(r){return r[1].toUpperCase()})}function bt(e,r,n){if(Array.isArray(e)){if(typeof r!="number")throw new TypeError("Array key must be number")}else if(typeof e=="object"&&e!==null&&typeof r!="string")throw new TypeError("Object key must be string");Object.defineProperty(e,r,{configurable:!0,enumerable:!0,get:function(){delete e[r];var t=n();return e[r]=t,t},set:function(t){delete e[r],e[r]=t}})}function Un(e){return[].slice.call(e)}function xt(e){return typeof(r=e)=="object"&&r!==null&&{}.toString.call(e)==="[object Object]";var r}function jn(e){if(!xt(e))return!1;var r=e.constructor;if(typeof r!="function")return!1;var n=r.prototype;return!!xt(n)&&!!n.hasOwnProperty("isPrototypeOf")}function hn(e,r,n){if(n===void 0&&(n=""),Array.isArray(e)){for(var t=e.length,o=[],i=function(d){bt(o,d,function(){var f=n?n+"."+d:""+d,l=r(e[d],d,f);return(jn(l)||Array.isArray(l))&&(l=hn(l,r,f)),l})},a=0;a<t;a++)i(a);return o}if(jn(e)){var s={},u=function(d){if(!e.hasOwnProperty(d))return"continue";bt(s,d,function(){var f=n?n+"."+d:""+d,l=r(e[d],d,f);return(jn(l)||Array.isArray(l))&&(l=hn(l,r,f)),l})};for(var c in e)u(c);return s}throw new Error("Pass an object or array")}function dr(e){return e!=null}function Ln(e){return{}.toString.call(e)==="[object RegExp]"}function $r(e,r,n){if(e.hasOwnProperty(r))return e[r];var t=n();return e[r]=t,t}function vn(e){var r=[],n=!1,t,o={set:function(i,a){return n||(e[i]=a,o.register(function(){delete e[i]})),a},register:function(i){var a=ln(function(){return i(t)});return n?i(t):r.push(a),{cancel:function(){var s=r.indexOf(a);s!==-1&&r.splice(s,1)}}},all:function(i){t=i;var a=[];for(n=!0;r.length;){var s=r.shift();a.push(s())}return p.all(a).then(ne)}};return o}function wn(e,r){if(r==null)throw new Error("Expected "+e+" to be present");return r}var Ho=function(e){oe(r,e);function r(n){var t;return(t=e.call(this,n)||this).name=t.constructor.name,typeof Error.captureStackTrace=="function"?Error.captureStackTrace(function(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}(t),t.constructor):t.stack=new Error(n).stack,t}return r}(Et(Error));function Ot(){var e=document.body;if(!e)throw new Error("Body element not found");return e}function pn(){return!!document.body&&document.readyState==="complete"}function Ct(){return!!document.body&&document.readyState==="interactive"}function Wt(e){return encodeURIComponent(e)}sr(function(){return new p(function(e){if(pn()||Ct())return e();var r=setInterval(function(){if(pn()||Ct())return clearInterval(r),e()},10)})});function St(e){return function(r,n,t){t===void 0&&(t=[]);var o=r.__inline_memoize_cache__=r.__inline_memoize_cache__||{},i=Mn(t);return o.hasOwnProperty(i)?o[i]:o[i]=function(){var a={};if(!e||e.indexOf("=")===-1)return a;for(var s=0,u=e.split("&");s<u.length;s++){var c=u[s];(c=c.split("="))[0]&&c[1]&&(a[decodeURIComponent(c[0])]=decodeURIComponent(c[1]))}return a}.apply(void 0,t)}(St,0,[e])}function Dt(e,r){return r===void 0&&(r={}),r&&Object.keys(r).length?function(n){return n===void 0&&(n={}),Object.keys(n).filter(function(t){return typeof n[t]=="string"||typeof n[t]=="boolean"}).map(function(t){var o=n[t];if(typeof o!="string"&&typeof o!="boolean")throw new TypeError("Invalid type for query");return Wt(t)+"="+Wt(o.toString())}).join("&")}(_({},St(e),r)):e}function Jo(e,r){e.appendChild(r)}function Rt(e){return e instanceof window.Element||e!==null&&typeof e=="object"&&e.nodeType===1&&typeof e.style=="object"&&typeof e.ownerDocument=="object"}function mn(e,r){return r===void 0&&(r=document),Rt(e)?e:typeof e=="string"?r.querySelector(e):void 0}function Nt(e){return new p(function(r,n){var t=Br(e),o=mn(e);if(o)return r(o);if(pn())return n(new Error("Document is ready and element "+t+" does not exist"));var i=setInterval(function(){if(o=mn(e))r(o),clearInterval(i);else if(pn())return clearInterval(i),n(new Error("Document is ready and element "+t+" does not exist"))},10)})}var Bn=function(e){oe(r,e);function r(){return e.apply(this,arguments)||this}return r}(Ho),gn;function It(e){if((gn=gn||new dn).has(e)){var r=gn.get(e);if(r)return r}var n=new p(function(t,o){e.addEventListener("load",function(){(function(i){if(function(){for(var a=0;a<Ur.length;a++){var s=!1;try{s=Ur[a].closed}catch{}s&&(Dn.splice(a,1),Ur.splice(a,1))}}(),i&&i.contentWindow)try{Ur.push(i.contentWindow),Dn.push(i)}catch{}})(e),t(e)}),e.addEventListener("error",function(i){e.contentWindow?t(e):o(i)})});return gn.set(e,n),n}function qn(e){return It(e).then(function(r){if(!r.contentWindow)throw new Error("Could not find window in iframe");return r.contentWindow})}function At(e,r){e===void 0&&(e={});var n=e.style||{},t=function(i,a,s){i===void 0&&(i="div"),a===void 0&&(a={}),i=i.toLowerCase();var u=document.createElement(i);if(a.style&&Ir(u.style,a.style),a.class&&(u.className=a.class.join(" ")),a.id&&u.setAttribute("id",a.id),a.attributes)for(var c=0,d=Object.keys(a.attributes);c<d.length;c++){var f=d[c];u.setAttribute(f,a.attributes[f])}if(a.styleSheet&&function(l,h,v){v===void 0&&(v=window.document),l.styleSheet?l.styleSheet.cssText=h:l.appendChild(v.createTextNode(h))}(u,a.styleSheet),a.html){if(i==="iframe")throw new Error("Iframe html can not be written unless container provided and iframe in DOM");u.innerHTML=a.html}return u}("iframe",{attributes:_({allowTransparency:"true"},e.attributes||{}),style:_({backgroundColor:"transparent",border:"none"},n),html:e.html,class:e.class}),o=window.navigator.userAgent.match(/MSIE|Edge/i);return t.hasAttribute("id")||t.setAttribute("id",Re()),It(t),r&&function(i,a){a===void 0&&(a=document);var s=mn(i,a);if(s)return s;throw new Error("Can not find element: "+Br(i))}(r).appendChild(t),(e.url||o)&&t.setAttribute("src",e.url||"about:blank"),t}function Tt(e,r,n){return e.addEventListener(r,n),{cancel:function(){e.removeEventListener(r,n)}}}function Zo(e){e.style.setProperty("display","")}function zt(e){e.style.setProperty("display","none","important")}function Hr(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function yn(e){return!(e&&e.parentNode&&e.ownerDocument&&e.ownerDocument.documentElement&&e.ownerDocument.documentElement.contains(e))}function Mt(e,r,n){var t=n===void 0?{}:n,o=t.width,i=o===void 0||o,a=t.height,s=a===void 0||a,u=t.interval,c=u===void 0?100:u,d=t.win,f=d===void 0?window:d,l=e.offsetWidth,h=e.offsetHeight,v=!1;r({width:l,height:h});var m=function(){if(!v&&function(P){return!!(P.offsetWidth||P.offsetHeight||P.getClientRects().length)}(e)){var O=e.offsetWidth,F=e.offsetHeight;(i&&O!==l||s&&F!==h)&&r({width:O,height:F}),l=O,h=F}},g,b;return f.addEventListener("resize",m),f.ResizeObserver!==void 0?((g=new f.ResizeObserver(m)).observe(e),b=qr(m,10*c)):f.MutationObserver!==void 0?((g=new f.MutationObserver(m)).observe(e,{attributes:!0,childList:!0,subtree:!0,characterData:!1}),b=qr(m,10*c)):b=qr(m,c),{cancel:function(){v=!0,g.disconnect(),window.removeEventListener("resize",m),b.cancel()}}}function $n(e){for(;e.parentNode;)e=e.parentNode;return e.toString()==="[object ShadowRoot]"}var En=typeof document<"u"?document.currentScript:null,Go=sr(function(){if(En||(En=function(){try{var e=function(){try{throw new Error("_")}catch(a){return a.stack||""}}(),r=/.*at [^(]*\((.*):(.+):(.+)\)$/gi.exec(e),n=r&&r[1];if(!n)return;for(var t=0,o=[].slice.call(document.getElementsByTagName("script")).reverse();t<o.length;t++){var i=o[t];if(i.src&&i.src===n)return i}}catch{}}()))return En;throw new Error("Can not determine current script")}),Yo=Re();sr(function(){var e;try{e=Go()}catch{return Yo}var r=e.getAttribute("data-uid");if(r&&typeof r=="string"||(r=e.getAttribute("data-uid-auto"))&&typeof r=="string")return r;if(e.src){var n=function(t){for(var o="",i=0;i<t.length;i++){var a=t[i].charCodeAt(0)*i;t[i+1]&&(a+=t[i+1].charCodeAt(0)*(i-1)),o+=String.fromCharCode(97+Math.abs(a)%26)}return o}(JSON.stringify({src:e.src,dataset:e.dataset}));r="uid_"+n.slice(n.length-30)}else r=Re();return e.setAttribute("data-uid-auto",r),r});function Ft(e){return typeof e=="string"&&/^[0-9]+%$/.test(e)}function Hn(e){if(typeof e=="number")return e;var r=e.match(/^([0-9]+)(px|%)$/);if(!r)throw new Error("Could not match css value from "+e);return parseInt(r[1],10)}function Ut(e){return Hn(e)+"px"}function jt(e){return typeof e=="number"?Ut(e):Ft(e)?e:Ut(e)}function Lt(e,r){if(typeof e=="number")return e;if(Ft(e))return parseInt(r*Hn(e)/100,10);if(typeof(n=e)=="string"&&/^[0-9]+px$/.test(n))return Hn(e);var n;throw new Error("Can not normalize dimension: "+e)}function Ke(e){e===void 0&&(e=window);var r="__post_robot_10_0_44__";return e!==window?e[r]:e[r]=e[r]||{}}var Bt=function(){return{}};function G(e,r){return e===void 0&&(e="store"),r===void 0&&(r=Bt),$r(Ke(),e,function(){var n=r();return{has:function(t){return n.hasOwnProperty(t)},get:function(t,o){return n.hasOwnProperty(t)?n[t]:o},set:function(t,o){return n[t]=o,o},del:function(t){delete n[t]},getOrSet:function(t,o){return $r(n,t,o)},reset:function(){n=r()},keys:function(){return Object.keys(n)}}})}var Vo=function(){};function Pn(){var e=Ke();return e.WINDOW_WILDCARD=e.WINDOW_WILDCARD||new Vo,e.WINDOW_WILDCARD}function Ce(e,r){return e===void 0&&(e="store"),r===void 0&&(r=Bt),G("windowStore").getOrSet(e,function(){var n=new dn,t=function(o){return n.getOrSet(o,r)};return{has:function(o){return t(o).hasOwnProperty(e)},get:function(o,i){var a=t(o);return a.hasOwnProperty(e)?a[e]:i},set:function(o,i){return t(o)[e]=i,i},del:function(o){delete t(o)[e]},getOrSet:function(o,i){return $r(t(o),e,i)}}})}function qt(){return G("instance").getOrSet("instanceID",Re)}function $t(e,r){var n=r.domain,t=Ce("helloPromises"),o=t.get(e);o&&o.resolve({domain:n});var i=p.resolve({domain:n});return t.set(e,i),i}function Jn(e,r){return(0,r.send)(e,"postrobot_hello",{instanceID:qt()},{domain:"*",timeout:-1}).then(function(n){var t=n.origin,o=n.data.instanceID;return $t(e,{domain:t}),{win:e,domain:t,instanceID:o}})}function Ht(e,r){var n=r.send;return Ce("windowInstanceIDPromises").getOrSet(e,function(){return Jn(e,{send:n}).then(function(t){return t.instanceID})})}function Jt(e,r,n){r===void 0&&(r=5e3),n===void 0&&(n="Window");var t=function(o){return Ce("helloPromises").getOrSet(o,function(){return new p})}(e);return r!==-1&&(t=t.timeout(r,new Error(n+" did not load after "+r+"ms"))),t}function Zt(e){Ce("knownWindows").set(e,!0)}function Zn(e){return typeof e=="object"&&e!==null&&typeof e.__type__=="string"}function Gt(e){return e===void 0?"undefined":e===null?"null":Array.isArray(e)?"array":typeof e=="function"?"function":typeof e=="object"?e instanceof Error?"error":typeof e.then=="function"?"promise":{}.toString.call(e)==="[object RegExp]"?"regex":{}.toString.call(e)==="[object Date]"?"date":"object":typeof e=="string"?"string":typeof e=="number"?"number":typeof e=="boolean"?"boolean":void 0}function Er(e,r){return{__type__:e,__val__:r}}var Fe,Xo=((Fe={}).function=function(){},Fe.error=function(e){return Er("error",{message:e.message,stack:e.stack,code:e.code,data:e.data})},Fe.promise=function(){},Fe.regex=function(e){return Er("regex",e.source)},Fe.date=function(e){return Er("date",e.toJSON())},Fe.array=function(e){return e},Fe.object=function(e){return e},Fe.string=function(e){return e},Fe.number=function(e){return e},Fe.boolean=function(e){return e},Fe.null=function(e){return e},Fe[void 0]=function(e){return Er("undefined",e)},Fe),Qo={},Ue,Ko=((Ue={}).function=function(){throw new Error("Function serialization is not implemented; nothing to deserialize")},Ue.error=function(e){var r=e.stack,n=e.code,t=e.data,o=new Error(e.message);return o.code=n,t&&(o.data=t),o.stack=r+`

`+o.stack,o},Ue.promise=function(){throw new Error("Promise serialization is not implemented; nothing to deserialize")},Ue.regex=function(e){return new RegExp(e)},Ue.date=function(e){return new Date(e)},Ue.array=function(e){return e},Ue.object=function(e){return e},Ue.string=function(e){return e},Ue.number=function(e){return e},Ue.boolean=function(e){return e},Ue.null=function(e){return e},Ue[void 0]=function(){},Ue),_o={};function Gn(){return!!ht(window).match(/MSIE|trident|edge\/12|edge\/13/i)}function Yt(e){return!cn(window,e)}function Vt(e,r){if(e){if(V()!==tr(e))return!0}else if(r&&!ie(r))return!0;return!1}function Xt(e){var r=e.win,n=e.domain;return!(!Gn()||n&&!Vt(n,r)||r&&!Yt(r))}function Yn(e){return"__postrobot_bridge___"+(e=e||tr(e)).replace(/[^a-zA-Z0-9]+/g,"_")}function Qt(){return!!(window.name&&window.name===Yn(V()))}var ko=new p(function(e){if(window.document&&window.document.body)return e(window.document.body);var r=setInterval(function(){if(window.document&&window.document.body)return clearInterval(r),e(window.document.body)},10)});function Kt(e){Ce("remoteWindowPromises").getOrSet(e,function(){return new p})}function Vn(e){var r=Ce("remoteWindowPromises").get(e);if(!r)throw new Error("Remote window promise not found");return r}function _t(e,r,n){Vn(e).resolve(function(t,o,i){if(t!==e)throw new Error("Remote window does not match window");if(!$e(o,r))throw new Error("Remote domain "+o+" does not match domain "+r);n.fireAndForget(i)})}function Xn(e,r){Vn(e).reject(r).catch(ne)}function bn(e){for(var r=e.win,n=e.name,t=e.domain,o=G("popupWindowsByName"),i=Ce("popupWindowsByWin"),a=0,s=o.keys();a<s.length;a++){var u=s[a],c=o.get(u);c&&!fe(c.win)||o.del(u)}if(fe(r))return{win:r,name:n,domain:t};var d=i.getOrSet(r,function(){return n?o.getOrSet(n,function(){return{win:r,name:n}}):{win:r}});if(d.win&&d.win!==r)throw new Error("Different window already linked for window: "+(n||"undefined"));return n&&(d.name=n,o.set(n,d)),t&&(d.domain=t,Kt(r)),i.set(r,d),d}function kt(e){var r=e.on,n=e.send,t=e.receiveMessage;o=window.open,window.open=function(i,a,s,u){var c=o.call(this,In(i),a,s,u);return c&&(bn({win:c,name:a,domain:i?tr(i):null}),c)};var o;(function(i){var a=i.on,s=i.send,u=i.receiveMessage,c=G("popupWindowsByName");a("postrobot_open_tunnel",function(d){var f=d.source,l=d.origin,h=d.data,v=G("bridges").get(l);if(!v)throw new Error("Can not find bridge promise for domain "+l);return v.then(function(m){if(f!==m)throw new Error("Message source does not matched registered bridge for domain "+l);if(!h.name)throw new Error("Register window expected to be passed window name");if(!h.sendMessage)throw new Error("Register window expected to be passed sendMessage method");if(!c.has(h.name))throw new Error("Window with name "+h.name+" does not exist, or was not opened by this window");var g=function(){return c.get(h.name)};if(!g().domain)throw new Error("We do not have a registered domain for window "+h.name);if(g().domain!==l)throw new Error("Message origin "+l+" does not matched registered window origin "+(g().domain||"unknown"));return _t(g().win,l,h.sendMessage),{sendMessage:function(b){if(window&&!window.closed&&g()){var O=g().domain;if(O)try{u({data:b,origin:O,source:g().win},{on:a,send:s})}catch(F){p.reject(F)}}}}})})})({on:r,send:n,receiveMessage:t}),function(i){var a=i.send;Ke(window).openTunnelToParent=function(s){var u=s.name,c=s.source,d=s.canary,f=s.sendMessage,l=G("tunnelWindows"),h=Ze(window);if(!h)throw new Error("No parent window found to open tunnel to");var v=function(m){var g=m.name,b=m.source,O=m.canary,F=m.sendMessage;(function(){for(var D=G("tunnelWindows"),W=0,U=D.keys();W<U.length;W++){var N=U[W];fe(D[N].source)&&D.del(N)}})();var P=Re();return G("tunnelWindows").set(P,{name:g,source:b,canary:O,sendMessage:F}),P}({name:u,source:c,canary:d,sendMessage:f});return a(h,"postrobot_open_tunnel",{name:u,sendMessage:function(){var m=l.get(v);if(m&&m.source&&!fe(m.source)){try{m.canary()}catch{return}m.sendMessage.apply(this,arguments)}}},{domain:"*"})}}({send:n}),function(i){var a=i.on,s=i.send,u=i.receiveMessage;p.try(function(){var c=cr(window);if(c&&Xt({win:c})){return Kt(c),(d=c,Ce("remoteBridgeAwaiters").getOrSet(d,function(){return p.try(function(){var f=un(d,Yn(V()));if(f)return ie(f)&&Ke(qe(f))?f:new p(function(l){var h,v;h=setInterval(function(){if(f&&ie(f)&&Ke(qe(f)))return clearInterval(h),clearTimeout(v),l(f)},100),v=setTimeout(function(){return clearInterval(h),l()},2e3)})})})).then(function(f){return f?window.name?Ke(qe(f)).openTunnelToParent({name:window.name,source:window,canary:function(){},sendMessage:function(l){try{}catch{return}if(window&&!window.closed)try{u({data:l,origin:this.origin,source:this.source},{on:a,send:s})}catch(h){p.reject(h)}}}).then(function(l){var h=l.source,v=l.origin,m=l.data;if(h!==c)throw new Error("Source does not match opener");_t(h,v,m.sendMessage)}).catch(function(l){throw Xn(c,l),l}):Xn(c,new Error("Can not register with opener: window does not have a name")):Xn(c,new Error("Can not register with opener: no bridge found in opener"))});var d}})}({on:r,send:n,receiveMessage:t})}function Qn(){for(var e=G("idToProxyWindow"),r=0,n=e.keys();r<n.length;r++){var t=n[r];e.get(t).shouldClean()&&e.del(t)}}function eo(e,r){var n=r.send,t=r.id,o=t===void 0?Re():t,i=e.then(function(u){if(ie(u))return qe(u).name}),a=e.then(function(u){if(fe(u))throw new Error("Window is closed, can not determine type");return cr(u)?rn.POPUP:rn.IFRAME});i.catch(ne),a.catch(ne);var s=function(){return e.then(function(u){if(!fe(u))return ie(u)?qe(u).name:i})};return{id:o,getType:function(){return a},getInstanceID:qo(function(){return e.then(function(u){return Ht(u,{send:n})})}),close:function(){return e.then(mt)},getName:s,focus:function(){return e.then(function(u){u.focus()})},isClosed:function(){return e.then(function(u){return fe(u)})},setLocation:function(u,c){return c===void 0&&(c={}),e.then(function(d){var f=window.location.protocol+"//"+window.location.host,l=c.method,h=l===void 0?"get":l,v=c.body;if(u.indexOf("/")===0)u=""+f+u;else if(!u.match(/^https?:\/\//)&&u.indexOf(f)!==0)throw new Error("Expected url to be http or https url, or absolute path, got "+JSON.stringify(u));if(h==="post")return s().then(function(m){if(!m)throw new Error("Can not post to window without target name");(function(g){var b=g.url,O=g.target,F=g.body,P=g.method,D=P===void 0?"post":P,W=document.createElement("form");if(W.setAttribute("target",O),W.setAttribute("method",D),W.setAttribute("action",b),W.style.display="none",F)for(var U=0,N=Object.keys(F);U<N.length;U++){var X,L=N[U],I=document.createElement("input");I.setAttribute("name",L),I.setAttribute("value",(X=F[L])==null?void 0:X.toString()),W.appendChild(I)}Ot().appendChild(W),W.submit(),Ot().removeChild(W)})({url:u,target:m,method:h,body:v})});if(h!=="get")throw new Error("Unsupported method: "+h);if(ie(d))try{if(d.location&&typeof d.location.replace=="function"){d.location.replace(u);return}}catch{}d.location=u})},setName:function(u){return e.then(function(c){bn({win:c,name:u});var d=ie(c),f=pt(c);if(!d)throw new Error("Can not set name for cross-domain window: "+u);qe(c).name=u,f&&f.setAttribute("name",u),i=p.resolve(u)})}}}var Ge=function(){function e(n){var t=n.send,o=n.win,i=n.serializedWindow;this.id=void 0,this.isProxyWindow=!0,this.serializedWindow=void 0,this.actualWindow=void 0,this.actualWindowPromise=void 0,this.send=void 0,this.name=void 0,this.actualWindowPromise=new p,this.serializedWindow=i||eo(this.actualWindowPromise,{send:t}),G("idToProxyWindow").set(this.getID(),this),o&&this.setWindow(o,{send:t})}var r=e.prototype;return r.getID=function(){return this.serializedWindow.id},r.getType=function(){return this.serializedWindow.getType()},r.isPopup=function(){return this.getType().then(function(n){return n===rn.POPUP})},r.setLocation=function(n,t){var o=this;return this.serializedWindow.setLocation(n,t).then(function(){return o})},r.getName=function(){return this.serializedWindow.getName()},r.setName=function(n){var t=this;return this.serializedWindow.setName(n).then(function(){return t})},r.close=function(){var n=this;return this.serializedWindow.close().then(function(){return n})},r.focus=function(){var n=this,t=this.isPopup(),o=this.getName(),i=p.hash({isPopup:t,name:o}).then(function(s){var u=s.name;s.isPopup&&u&&window.open("",u)}),a=this.serializedWindow.focus();return p.all([i,a]).then(function(){return n})},r.isClosed=function(){return this.serializedWindow.isClosed()},r.getWindow=function(){return this.actualWindow},r.setWindow=function(n,t){var o=t.send;this.actualWindow=n,this.actualWindowPromise.resolve(this.actualWindow),this.serializedWindow=eo(this.actualWindowPromise,{send:o,id:this.getID()}),Ce("winToProxyWindow").set(n,this)},r.awaitWindow=function(){return this.actualWindowPromise},r.matchWindow=function(n,t){var o=this,i=t.send;return p.try(function(){return o.actualWindow?n===o.actualWindow:p.hash({proxyInstanceID:o.getInstanceID(),knownWindowInstanceID:Ht(n,{send:i})}).then(function(a){var s=a.proxyInstanceID===a.knownWindowInstanceID;return s&&o.setWindow(n,{send:i}),s})})},r.unwrap=function(){return this.actualWindow||this},r.getInstanceID=function(){return this.serializedWindow.getInstanceID()},r.shouldClean=function(){return!!(this.actualWindow&&fe(this.actualWindow))},r.serialize=function(){return this.serializedWindow},e.unwrap=function(n){return e.isProxyWindow(n)?n.unwrap():n},e.serialize=function(n,t){var o=t.send;return Qn(),e.toProxyWindow(n,{send:o}).serialize()},e.deserialize=function(n,t){var o=t.send;return Qn(),G("idToProxyWindow").get(n.id)||new e({serializedWindow:n,send:o})},e.isProxyWindow=function(n){return!!(n&&!yr(n)&&n.isProxyWindow)},e.toProxyWindow=function(n,t){var o=t.send;if(Qn(),e.isProxyWindow(n))return n;var i=n;return Ce("winToProxyWindow").get(i)||new e({win:i,send:o})},e}();function Kn(e,r,n,t,o){var i=Ce("methodStore"),a=G("proxyWindowMethods");Ge.isProxyWindow(t)?a.set(e,{val:r,name:n,domain:o,source:t}):(a.del(e),i.getOrSet(t,function(){return{}})[e]={domain:o,name:n,val:r,source:t})}function ro(e,r){var n=Ce("methodStore"),t=G("proxyWindowMethods");return n.getOrSet(e,function(){return{}})[r]||t.get(r)}function no(e,r,n,t,o){a=(i={on:o.on,send:o.send}).on,s=i.send,G("builtinListeners").getOrSet("functionCalls",function(){return a("postrobot_method",{domain:"*"},function(d){var f=d.source,l=d.origin,h=d.data,v=h.id,m=h.name,g=ro(f,v);if(!g)throw new Error("Could not find method '"+m+"' with id: "+h.id+" in "+V(window));var b=g.source,O=g.domain,F=g.val;return p.try(function(){if(!$e(O,l))throw new Error("Method '"+h.name+"' domain "+JSON.stringify(Ln(g.domain)?g.domain.source:g.domain)+" does not match origin "+l+" in "+V(window));if(Ge.isProxyWindow(b))return b.matchWindow(f,{send:s}).then(function(P){if(!P)throw new Error("Method call '"+h.name+"' failed - proxy window does not match source in "+V(window))})}).then(function(){return F.apply({source:f,origin:l},h.args)},function(P){return p.try(function(){if(F.onError)return F.onError(P)}).then(function(){throw P.stack&&(P.stack="Remote call to "+m+"("+function(D){return D===void 0&&(D=[]),Un(D).map(function(W){return typeof W=="string"?"'"+W+"'":W===void 0?"undefined":W===null?"null":typeof W=="boolean"?W.toString():Array.isArray(W)?"[ ... ]":typeof W=="object"?"{ ... }":typeof W=="function"?"() => { ... }":"<"+typeof W+">"}).join(", ")}(h.args)+`) failed

`+P.stack),P})}).then(function(P){return{result:P,id:v,name:m}})})});var i,a,s,u=n.__id__||Re();e=Ge.unwrap(e);var c=n.__name__||n.name||t;return typeof c=="string"&&typeof c.indexOf=="function"&&c.indexOf("anonymous::")===0&&(c=c.replace("anonymous::",t+"::")),Ge.isProxyWindow(e)?(Kn(u,n,c,e,r),e.awaitWindow().then(function(d){Kn(u,n,c,d,r)})):Kn(u,n,c,e,r),Er("cross_domain_function",{id:u,name:c})}function to(e,r,n,t){var o,i=t.on,a=t.send;return function(s,u){u===void 0&&(u=Qo);var c=JSON.stringify(s,function(d){var f=this[d];if(Zn(this))return f;var l=Gt(f);if(!l)return f;var h=u[l]||Xo[l];return h?h(f,d):f});return c===void 0?"undefined":c}(n,((o={}).promise=function(s,u){return function(c,d,f,l,h){return Er("cross_domain_zalgo_promise",{then:no(c,d,function(v,m){return f.then(v,m)},l,{on:h.on,send:h.send})})}(e,r,s,u,{on:i,send:a})},o.function=function(s,u){return no(e,r,s,u,{on:i,send:a})},o.object=function(s){return yr(s)||Ge.isProxyWindow(s)?Er("cross_domain_window",Ge.serialize(s,{send:a})):s},o))}function oo(e,r,n,t){var o,i=t.send;return function(a,s){if(s===void 0&&(s=_o),a!=="undefined")return JSON.parse(a,function(u,c){if(Zn(this))return c;var d,f;if(Zn(c)?(d=c.__type__,f=c.__val__):(d=Gt(c),f=c),!d)return f;var l=s[d]||Ko[d];return l?l(f,u):f})}(n,((o={}).cross_domain_zalgo_promise=function(a){return function(s,u,c){return new p(c.then)}(0,0,a)},o.cross_domain_function=function(a){return function(s,u,c,d){var f=c.id,l=c.name,h=d.send,v=function(g){g===void 0&&(g={});function b(){var O=arguments;return Ge.toProxyWindow(s,{send:h}).awaitWindow().then(function(F){var P=ro(F,f);if(P&&P.val!==b)return P.val.apply({source:window,origin:V()},O);var D=[].slice.call(O);return g.fireAndForget?h(F,"postrobot_method",{id:f,name:l,args:D},{domain:u,fireAndForget:!0}):h(F,"postrobot_method",{id:f,name:l,args:D},{domain:u,fireAndForget:!1}).then(function(W){return W.data.result})}).catch(function(F){throw F})}return b.__name__=l,b.__origin__=u,b.__source__=s,b.__id__=f,b.origin=u,b},m=v();return m.fireAndForget=v({fireAndForget:!0}),m}(e,r,a,{send:i})},o.cross_domain_window=function(a){return Ge.deserialize(a,{send:i})},o))}var Jr={};Jr.postrobot_post_message=function(e,r,n){n.indexOf("file:")===0&&(n="*"),e.postMessage(r,n)},Jr.postrobot_bridge=function(e,r,n){if(!Gn()&&!Qt())throw new Error("Bridge not needed for browser");if(ie(e))throw new Error("Post message through bridge disabled between same domain windows");if(cn(window,e)!==!1)throw new Error("Can only use bridge to communicate between two different windows, not between frames");(function(t,o,i){var a=vt(window,t),s=vt(t,window);if(!a&&!s)throw new Error("Can only send messages to and from parent and popup windows");Vn(t).then(function(u){return u(t,o,i)})})(e,n,r)},Jr.postrobot_global=function(e,r){if(!ht(window).match(/MSIE|rv:11|trident|edge\/12|edge\/13/i))throw new Error("Global messaging not needed for browser");if(!ie(e))throw new Error("Post message through global disabled between different domain windows");if(cn(window,e)!==!1)throw new Error("Can only use global to communicate between two different windows, not between frames");var n=Ke(e);if(!n)throw new Error("Can not find postRobot global on foreign window");n.receiveMessage({source:window,origin:V(),data:r})};function _n(e,r,n,t){var o=t.on,i=t.send;return p.try(function(){var a=Ce().getOrSet(e,function(){return{}});return a.buffer=a.buffer||[],a.buffer.push(n),a.flush=a.flush||p.flush().then(function(){if(fe(e))throw new Error("Window is closed");var s=to(e,r,((u={}).__post_robot_10_0_44__=a.buffer||[],u),{on:o,send:i}),u;delete a.buffer;for(var c=Object.keys(Jr),d=[],f=0;f<c.length;f++){var l=c[f];try{Jr[l](e,s,r)}catch(h){d.push(h)}}if(d.length===c.length)throw new Error(`All post-robot messaging strategies failed:

`+d.map(function(h,v){return v+". "+Nr(h)}).join(`

`))}),a.flush.then(function(){delete a.flush})}).then(ne)}function io(e){return G("responseListeners").get(e)}function ao(e){G("responseListeners").del(e)}function uo(e){return G("erroredResponseListeners").has(e)}function co(e){var r=e.name,n=e.win,t=e.domain,o=Ce("requestListeners");if(n==="*"&&(n=null),t==="*"&&(t=null),!r)throw new Error("Name required to get request listener");for(var i=0,a=[n,Pn()];i<a.length;i++){var s=a[i];if(s){var u=o.get(s);if(u){var c=u[r];if(c){if(t&&typeof t=="string"){if(c[t])return c[t];if(c.__domain_regex__)for(var d=0,f=c.__domain_regex__;d<f.length;d++){var l=f[d],h=l.listener;if($e(l.regex,t))return h}}if(c["*"])return c["*"]}}}}}function ei(e,r,n,t){var o=t.on,i=t.send,a=co({name:n.name,win:e,domain:r}),s=n.name==="postrobot_method"&&n.data&&typeof n.data.name=="string"?n.data.name+"()":n.name;function u(c,d,f){return p.flush().then(function(){if(!n.fireAndForget&&!fe(e))try{return _n(e,r,{id:Re(),origin:V(window),type:"postrobot_message_response",hash:n.hash,name:n.name,ack:c,data:d,error:f},{on:o,send:i})}catch(l){throw new Error("Send response message failed for "+s+" in "+V()+`

`+Nr(l))}})}return p.all([p.flush().then(function(){if(!n.fireAndForget&&!fe(e))try{return _n(e,r,{id:Re(),origin:V(window),type:"postrobot_message_ack",hash:n.hash,name:n.name},{on:o,send:i})}catch(c){throw new Error("Send ack message failed for "+s+" in "+V()+`

`+Nr(c))}}),p.try(function(){if(!a)throw new Error("No handler found for post message: "+n.name+" from "+r+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);if(!$e(a.domain,r))throw new Error("Request origin "+r+" does not match domain "+a.domain.toString());return a.handler({source:e,origin:r,data:n.data})}).then(function(c){return u("success",c)},function(c){return u("error",null,c)})]).then(ne).catch(function(c){if(a&&a.handleError)return a.handleError(c);throw c})}function ri(e,r,n){if(!uo(n.hash)){var t=io(n.hash);if(!t)throw new Error("No handler found for post message ack for message: "+n.name+" from "+r+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);try{if(!$e(t.domain,r))throw new Error("Ack origin "+r+" does not match domain "+t.domain.toString());if(e!==t.win)throw new Error("Ack source does not match registered window")}catch(o){t.promise.reject(o)}t.ack=!0}}function ni(e,r,n){if(!uo(n.hash)){var t=io(n.hash);if(!t)throw new Error("No handler found for post message response for message: "+n.name+" from "+r+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);if(!$e(t.domain,r))throw new Error("Response origin "+r+" does not match domain "+(o=t.domain,Array.isArray(o)?"("+o.join(" | ")+")":Fr(o)?"RegExp("+o.toString()+")":o.toString()));var o;if(e!==t.win)throw new Error("Response source does not match registered window");ao(n.hash),n.ack==="error"?t.promise.reject(n.error):n.ack==="success"&&t.promise.resolve({source:e,origin:r,data:n.data})}}function kn(e,r){var n=r.on,t=r.send,o=G("receivedMessages");try{if(!window||window.closed||!e.source)return}catch{return}var i=e.source,a=e.origin,s=function(d,f,l,h){var v=h.on,m=h.send,g;try{g=oo(f,l,d,{on:v,send:m})}catch{return}if(g&&typeof g=="object"&&g!==null){var b=g.__post_robot_10_0_44__;if(Array.isArray(b))return b}}(e.data,i,a,{on:n,send:t});if(s){Zt(i);for(var u=0;u<s.length;u++){var c=s[u];if(o.has(c.id)||(o.set(c.id,!0),fe(i)&&!c.fireAndForget))return;c.origin.indexOf("file:")===0&&(a="file://");try{c.type==="postrobot_message_request"?ei(i,a,c,{on:n,send:t}):c.type==="postrobot_message_response"?ni(i,a,c):c.type==="postrobot_message_ack"&&ri(i,a,c)}catch(d){setTimeout(function(){throw d},0)}}}}function or(e,r,n){if(!e)throw new Error("Expected name");if(typeof(r=r||{})=="function"&&(n=r,r={}),!n)throw new Error("Expected handler");(r=r||{}).name=e,r.handler=n||r.handler;var t=r.window,o=r.domain,i=function a(s,u){var c=s.name,d=s.win,f=s.domain,l=Ce("requestListeners");if(!c||typeof c!="string")throw new Error("Name required to add request listener");if(Array.isArray(d)){for(var h=[],v=0,m=d;v<m.length;v++)h.push(a({name:c,domain:f,win:m[v]},u));return{cancel:function(){for(var X=0;X<h.length;X++)h[X].cancel()}}}if(Array.isArray(f)){for(var g=[],b=0,O=f;b<O.length;b++)g.push(a({name:c,win:d,domain:O[b]},u));return{cancel:function(){for(var X=0;X<g.length;X++)g[X].cancel()}}}var F=co({name:c,win:d,domain:f});if(d&&d!=="*"||(d=Pn()),f=f||"*",F)throw d&&f?new Error("Request listener already exists for "+c+" on domain "+f.toString()+" for "+(d===Pn()?"wildcard":"specified")+" window"):d?new Error("Request listener already exists for "+c+" for "+(d===Pn()?"wildcard":"specified")+" window"):f?new Error("Request listener already exists for "+c+" on domain "+f.toString()):new Error("Request listener already exists for "+c);var P=l.getOrSet(d,function(){return{}}),D=$r(P,c,function(){return{}}),W=f.toString(),U,N;return Ln(f)?(U=$r(D,"__domain_regex__",function(){return[]})).push(N={regex:f,listener:u}):D[W]=u,{cancel:function(){delete D[W],N&&(U.splice(U.indexOf(N,1)),U.length||delete D.__domain_regex__),Object.keys(D).length||delete P[c],d&&!Object.keys(P).length&&l.del(d)}}}({name:e,win:t,domain:o},{handler:r.handler,handleError:r.errorHandler||function(a){throw a},window:t,domain:o||"*",name:e});return{cancel:function(){i.cancel()}}}var Ye=function e(r,n,t,o){var i=(o=o||{}).domain||"*",a=o.timeout||-1,s=o.timeout||5e3,u=o.fireAndForget||!1;return p.try(function(){if(function(c,d,f){if(!c)throw new Error("Expected name");if(f&&typeof f!="string"&&!Array.isArray(f)&&!Ln(f))throw new TypeError("Can not send "+c+". Expected domain "+JSON.stringify(f)+" to be a string, array, or regex");if(fe(d))throw new Error("Can not send "+c+". Target window is closed")}(n,r,i),function(c,d){var f=jr(d);if(f)return f===c;if(d===c||Dr(d)===d)return!1;for(var l=0,h=on(c);l<h.length;l++)if(h[l]===d)return!0;return!1}(window,r))return Jt(r,s)}).then(function(c){return function(d,f,l,h){var v=h.send;return p.try(function(){return typeof f=="string"?f:p.try(function(){return l||Jn(d,{send:v}).then(function(m){return m.domain})}).then(function(m){if(!$e(f,f))throw new Error("Domain "+Br(f)+" does not match "+Br(f));return m})})}(r,i,(c===void 0?{}:c).domain,{send:e})}).then(function(c){var d=c,f=n==="postrobot_method"&&t&&typeof t.name=="string"?t.name+"()":n,l=new p,h=n+"_"+Re();if(!u){var v={name:n,win:r,domain:d,promise:l};(function(D,W){G("responseListeners").set(D,W)})(h,v);var m=Ce("requestPromises").getOrSet(r,function(){return[]});m.push(l),l.catch(function(){(function(D){G("erroredResponseListeners").set(D,!0)})(h),ao(h)});var g=function(D){return Ce("knownWindows").get(D,!1)}(r)?1e4:2e3,b=a,O=g,F=b,P=qr(function(){return fe(r)?l.reject(new Error("Window closed for "+n+" before "+(v.ack?"response":"ack"))):v.cancelled?l.reject(new Error("Response listener was cancelled for "+n)):(O=Math.max(O-500,0),F!==-1&&(F=Math.max(F-500,0)),v.ack||O!==0?F===0?l.reject(new Error("No response for postMessage "+f+" in "+V()+" in "+b+"ms")):void 0:l.reject(new Error("No ack for postMessage "+f+" in "+V()+" in "+g+"ms")))},500);l.finally(function(){P.cancel(),m.splice(m.indexOf(l,1))}).catch(ne)}return _n(r,d,{id:Re(),origin:V(window),type:"postrobot_message_request",hash:h,name:n,data:t,fireAndForget:u},{on:or,send:e}).then(function(){return u?l.resolve():l},function(D){throw new Error("Send request message failed for "+f+" in "+V()+`

`+Nr(D))})})};function Zr(e){return Ge.toProxyWindow(e,{send:Ye})}function so(e){for(var r=0,n=Ce("requestPromises").get(e,[]);r<n.length;r++)n[r].reject(new Error("Window "+(fe(e)?"closed":"cleaned up")+" before response")).catch(ne)}var fr;fr={setupBridge:kt,openBridge:function(e,r){var n=G("bridges"),t=G("bridgeFrames");return r=r||tr(e),n.getOrSet(r,function(){return p.try(function(){if(V()===r)throw new Error("Can not open bridge on the same domain as current domain: "+r);var o=Yn(r);if(un(window,o))throw new Error("Frame with name "+o+" already exists on page");var i=function(a,s){var u=document.createElement("iframe");return u.setAttribute("name",a),u.setAttribute("id",a),u.setAttribute("style","display: none; margin: 0; padding: 0; border: 0px none; overflow: hidden;"),u.setAttribute("frameborder","0"),u.setAttribute("border","0"),u.setAttribute("scrolling","no"),u.setAttribute("allowTransparency","true"),u.setAttribute("tabindex","-1"),u.setAttribute("hidden","true"),u.setAttribute("title",""),u.setAttribute("role","presentation"),u.src=s,u}(o,e);return t.set(r,i),ko.then(function(a){a.appendChild(i);var s=i.contentWindow;return new p(function(u,c){i.addEventListener("load",u),i.addEventListener("error",c)}).then(function(){return Jt(s,5e3,"Bridge "+e)}).then(function(){return s})})})})},linkWindow:bn,linkUrl:function(e,r){bn({win:e,domain:tr(r)})},isBridge:Qt,needsBridge:Xt,needsBridgeForBrowser:Gn,hasBridge:function(e,r){return G("bridges").has(r||tr(e))},needsBridgeForWin:Yt,needsBridgeForDomain:Vt,destroyBridges:function(){for(var e=G("bridges"),r=G("bridgeFrames"),n=0,t=r.keys();n<t.length;n++){var o=r.get(t[n]);o&&o.parentNode&&o.parentNode.removeChild(o)}r.reset(),e.reset()}};function Gr(e){if(!ie(e))throw new Error("Can not get global for window on different domain");return e.__zoid_9_0_86__||(e.__zoid_9_0_86__={}),e.__zoid_9_0_86__}function fo(e,r){try{return r(Gr(e))}catch{}}function xn(e){return{get:function(){var r=this;return p.try(function(){if(r.source&&r.source!==window)throw new Error("Can not call get on proxy object from a remote window");return e})}}}function ti(e){return zn(JSON.stringify(e))}function et(e){var r=Gr(e);return r.references=r.references||{},r.references}function lo(e){var r=e.data,n=e.metaData,t=e.sender,o=e.receiver,i=e.passByReference,a=i!==void 0&&i,s=e.basic,u=s!==void 0&&s,c=Zr(o.win),d=u?JSON.stringify(r):to(c,o.domain,r,{on:or,send:Ye}),f=a?function(l){var h=Re();return et(window)[h]=l,{type:"uid",uid:h}}(d):{type:"raw",val:d};return{serializedData:ti({sender:{domain:t.domain},metaData:n,reference:f}),cleanReference:function(){l=window,(h=f).type==="uid"&&delete et(l)[h.uid];var l,h}}}function ho(e){var r=e.sender,n=e.basic,t=n!==void 0&&n,o=function(d){return JSON.parse(function(f){if(typeof atob=="function")return decodeURIComponent([].map.call(atob(f),function(l){return"%"+("00"+l.charCodeAt(0).toString(16)).slice(-2)}).join(""));if(typeof Buffer<"u")return Buffer.from(f,"base64").toString("utf8");throw new Error("Can not find window.atob or Buffer")}(d))}(e.data),i=o.reference,a=o.metaData,s;s=typeof r.win=="function"?r.win({metaData:a}):r.win;var u;u=typeof r.domain=="function"?r.domain({metaData:a}):typeof r.domain=="string"?r.domain:o.sender.domain;var c=function(d,f){if(f.type==="raw")return f.val;if(f.type==="uid")return et(d)[f.uid];throw new Error("Unsupported ref type: "+f.type)}(s,i);return{data:t?JSON.parse(c):function(d,f,l){return oo(d,f,l,{on:or,send:Ye})}(s,u,c),metaData:a,sender:{win:s,domain:u},reference:i}}var k={STRING:"string",OBJECT:"object",FUNCTION:"function",BOOLEAN:"boolean",NUMBER:"number",ARRAY:"array"},On={JSON:"json",DOTIFY:"dotify",BASE64:"base64"},le=rn,he={RENDER:"zoid-render",RENDERED:"zoid-rendered",DISPLAY:"zoid-display",ERROR:"zoid-error",CLOSE:"zoid-close",DESTROY:"zoid-destroy",PROPS:"zoid-props",RESIZE:"zoid-resize",FOCUS:"zoid-focus"};function vo(e){return"__zoid__"+e.name+"__"+e.serializedPayload+"__"}function rt(e){if(!e)throw new Error("No window name");var r=e.split("__"),n=r[1],t=r[2],o=r[3];if(n!=="zoid")throw new Error("Window not rendered by zoid - got "+n);if(!t)throw new Error("Expected component name");if(!o)throw new Error("Expected serialized payload ref");return{name:t,serializedInitialPayload:o}}var oi=sr(function(e){var r=ho({data:rt(e).serializedInitialPayload,sender:{win:function(n){return function(t){if(t.type==="opener")return wn("opener",cr(window));if(t.type==="parent"&&typeof t.distance=="number")return wn("parent",function(a,s){return s===void 0&&(s=1),function(u,c){c===void 0&&(c=1);for(var d=u,f=0;f<c;f++){if(!d)return;d=Ze(d)}return d}(a,Nn(a)-s)}(window,t.distance));if(t.type==="global"&&t.uid&&typeof t.uid=="string"){var o=function(){var a=t.uid,s=jr(window);if(!s)throw new Error("Can not find ancestor window");for(var u=0,c=Rr(s);u<c.length;u++){var d=c[u];if(ie(d)){var f=fo(d,function(l){return l.windows&&l.windows[a]});if(f)return{v:f}}}}();if(typeof o=="object")return o.v}else if(t.type==="name"){var i=t.name;return wn("namedWindow",function(a,s){return un(a,s)||function u(c,d){var f=un(c,d);if(f)return f;for(var l=0,h=on(c);l<h.length;l++){var v=u(h[l],d);if(v)return v}}(Dr(a)||a,s)}(wn("ancestor",jr(window)),i))}throw new Error("Unable to find "+t.type+" parent component window")}(n.metaData.windowRef)}}});return{parent:r.sender,payload:r.data,reference:r.reference}});function wo(){return oi(window.name)}function ii(e,r){if(r===void 0&&(r=window),e===Ze(r))return{type:"parent",distance:Nn(e)};if(e===cr(r))return{type:"opener"};if(ie(e)&&(t=e,t!==Dr(t))){var n=qe(e).name;if(n)return{type:"name",name:n}}var t}function po(e,r,n,t,o){if(!e.hasOwnProperty(n))return t;var i=e[n];return typeof i.childDecorate=="function"?i.childDecorate({value:t,uid:o.uid,tag:o.tag,close:o.close,focus:o.focus,onError:o.onError,onProps:o.onProps,resize:o.resize,getParent:o.getParent,getParentDomain:o.getParentDomain,show:o.show,hide:o.hide,export:o.export,getSiblings:o.getSiblings}):t}function ai(){return p.try(function(){window.focus()})}function mo(){return p.try(function(){window.close()})}var Pr=function(){return ne},Yr=function(e){return ln(e.value)};function nt(e,r,n){for(var t=0,o=Object.keys(_({},e,r));t<o.length;t++){var i=o[t];n(i,r[i],e[i])}}function go(e,r,n){var t={};return p.all(function(o,i,a){var s=[];return nt(o,i,function(u,c,d){var f=function(l,h,v){return p.resolve().then(function(){var m,g;if(v!=null&&h){var b=(m={},m.get=h.queryParam,m.post=h.bodyParam,m)[n],O=(g={},g.get=h.queryValue,g.post=h.bodyValue,g)[n];if(b)return p.hash({finalParam:p.try(function(){return typeof b=="function"?b({value:v}):typeof b=="string"?b:l}),finalValue:p.try(function(){return typeof O=="function"&&dr(v)?O({value:v}):v})}).then(function(F){var P=F.finalParam,D=F.finalValue,W;if(typeof D=="boolean")W=D.toString();else if(typeof D=="string")W=D.toString();else if(typeof D=="object"&&D!==null){if(h.serialization===On.JSON)W=JSON.stringify(D);else if(h.serialization===On.BASE64)W=zn(JSON.stringify(D));else if(h.serialization===On.DOTIFY||!h.serialization){W=function L(I,S,J){S===void 0&&(S=""),J===void 0&&(J={}),S=S&&S+".";for(var z in I)I.hasOwnProperty(z)&&I[z]!=null&&typeof I[z]!="function"&&(I[z]&&Array.isArray(I[z])&&I[z].length&&I[z].every(function(ae){return typeof ae!="object"})?J[""+S+z+"[]"]=I[z].join(","):I[z]&&typeof I[z]=="object"?J=L(I[z],""+S+z,J):J[""+S+z]=I[z].toString());return J}(D,l);for(var U=0,N=Object.keys(W);U<N.length;U++){var X=N[U];t[X]=W[X]}return}}else typeof D=="number"&&(W=D.toString());t[P]=W})}})}(u,c,d);s.push(f)}),s}(r,e)).then(function(){return t})}function yo(e){var r=e.uid,n=e.options,t=e.overrides,o=t===void 0?{}:t,i=e.parentWin,a=i===void 0?window:i,s=n.propsDef,u=n.containerTemplate,c=n.prerenderTemplate,d=n.tag,f=n.name,l=n.attributes,h=n.dimensions,v=n.autoResize,m=n.url,g=n.domain,b=n.exports,O=new p,F=[],P=vn(),D={},W={},U={visible:!0},N=o.event?o.event:(X={},L={},I={on:function(w,E){var C=L[w]=L[w]||[];C.push(E);var x=!1;return{cancel:function(){x||(x=!0,C.splice(C.indexOf(E),1))}}},once:function(w,E){var C=I.on(w,function(){C.cancel(),E()});return C},trigger:function(w){for(var E=arguments.length,C=new Array(E>1?E-1:0),x=1;x<E;x++)C[x-1]=arguments[x];var j=L[w],q=[];if(j)for(var te=function(Se){var K=j[Se];q.push(p.try(function(){return K.apply(void 0,C)}))},ee=0;ee<j.length;ee++)te(ee);return p.all(q).then(ne)},triggerOnce:function(w){if(X[w])return p.resolve();X[w]=!0;for(var E=arguments.length,C=new Array(E>1?E-1:0),x=1;x<E;x++)C[x-1]=arguments[x];return I.trigger.apply(I,[w].concat(C))},reset:function(){L={}}}),X,L,I,S=o.props?o.props:{},J,z,ae,_e,ke,lr=o.onError,ir=o.getProxyContainer,Ve=o.show,er=o.hide,hr=o.close,br=o.renderContainer,vr=o.getProxyWindow,Xe=o.setProxyWin,xr=o.openFrame,wr=o.openPrerenderFrame,pr=o.prerender,Or=o.open,Cr=o.openPrerender,B=o.watchForUnload,He=o.getInternalState,H=o.setInternalState,Pe=function(){return typeof h=="function"?h({props:S}):h},ve=function(){return p.try(function(){return o.resolveInitPromise?o.resolveInitPromise():O.resolve()})},ue=function(w){return p.try(function(){return o.rejectInitPromise?o.rejectInitPromise(w):O.reject(w)})},We=function(w){for(var E={},C=0,x=Object.keys(S);C<x.length;C++){var j=x[C],q=s[j];q&&q.sendToChild===!1||q&&q.sameDomain&&!$e(w,V(window))||(E[j]=S[j])}return p.hash(E)},Ne=function(){return p.try(function(){return He?He():U})},me=function(w){return p.try(function(){return H?H(w):U=_({},U,w)})},Ie=function(){return vr?vr():p.try(function(){var w=S.window;if(w){var E=Zr(w);return P.register(function(){return w.close()}),E}return new Ge({send:Ye})})},je=function(w){return Xe?Xe(w):p.try(function(){J=w})},Ae=function(){return Ve?Ve():p.hash({setState:me({visible:!0}),showElement:z?z.get().then(Zo):null}).then(ne)},Je=function(){return er?er():p.hash({setState:me({visible:!1}),showElement:z?z.get().then(zt):null}).then(ne)},Le=function(){return typeof m=="function"?m({props:S}):m},ar=function(){return typeof l=="function"?l({props:S}):l},Vr=function(){return tr(Le())},Wr=function(w,E){var C=E.windowName;return xr?xr(w,{windowName:C}):p.try(function(){if(w===le.IFRAME)return xn(At({attributes:_({name:C,title:f},ar().iframe)}))})},ur=function(w){return wr?wr(w):p.try(function(){if(w===le.IFRAME)return xn(At({attributes:_({name:"__zoid_prerender_frame__"+f+"_"+Re()+"__",title:"prerender__"+f},ar().iframe)}))})},Xr=function(w,E,C){return Cr?Cr(w,E,C):p.try(function(){if(w===le.IFRAME){if(!C)throw new Error("Expected proxy frame to be passed");return C.get().then(function(x){return P.register(function(){return Hr(x)}),qn(x).then(function(j){return qe(j)}).then(function(j){return Zr(j)})})}if(w===le.POPUP)return E;throw new Error("No render context available for "+w)})},Ar=function(){return p.try(function(){if(J)return p.all([N.trigger(he.FOCUS),J.focus()]).then(ne)})},Cn=function(){var w=Gr(window);return w.windows=w.windows||{},w.windows[r]=window,P.register(function(){delete w.windows[r]}),r},Qr=function(w,E,C,x){if(E===V(window))return{type:"global",uid:Cn()};if(w!==window)throw new Error("Can not construct cross-domain window reference for different target window");if(S.window){var j=x.getWindow();if(!j)throw new Error("Can not construct cross-domain window reference for lazy window prop");if(jr(j)!==window)throw new Error("Can not construct cross-domain window reference for window prop with different ancestor")}if(C===le.POPUP)return{type:"opener"};if(C===le.IFRAME)return{type:"parent",distance:Nn(window)};throw new Error("Can not construct window reference for child")},bo=function(w,E){return p.try(function(){_e=w,ae=E,ve(),P.register(function(){return E.close.fireAndForget().catch(ne)})})},it=function(w){var E=w.width,C=w.height;return p.try(function(){N.trigger(he.RESIZE,{width:E,height:C})})},Kr=function(w){return p.try(function(){return N.trigger(he.DESTROY)}).catch(ne).then(function(){return P.all(w)}).then(function(){O.asyncReject(w||new Error("Component destroyed"))})},mr=sr(function(w){return p.try(function(){return hr?fe(hr.__source__)?void 0:hr():p.try(function(){return N.trigger(he.CLOSE)}).then(function(){return Kr(w||new Error("Component closed"))})})}),xo=function(w,E){var C=E.proxyWin,x=E.proxyFrame,j=E.windowName;return Or?Or(w,{proxyWin:C,proxyFrame:x,windowName:j}):p.try(function(){if(w===le.IFRAME){if(!x)throw new Error("Expected proxy frame to be passed");return x.get().then(function(ce){return qn(ce).then(function(Y){return P.register(function(){return Hr(ce)}),P.register(function(){return so(Y)}),Y})})}if(w===le.POPUP){var q=Pe(),te=q.width,ee=te===void 0?"300px":te,Se=q.height,K=Se===void 0?"150px":Se;ee=Lt(ee,window.outerWidth),K=Lt(K,window.outerWidth);var we=function(ce,Y){var se=(Y=Y||{}).closeOnUnload,re=se===void 0?1:se,ze=Y.name,ge=ze===void 0?"":ze,Z=Y.width,ye=Y.height,Te=0,be=0;Z&&(window.outerWidth?be=Math.round((window.outerWidth-Z)/2)+window.screenX:window.screen.width&&(be=Math.round((window.screen.width-Z)/2))),ye&&(window.outerHeight?Te=Math.round((window.outerHeight-ye)/2)+window.screenY:window.screen.height&&(Te=Math.round((window.screen.height-ye)/2))),delete Y.closeOnUnload,delete Y.name,Z&&ye&&(Y=_({top:Te,left:be,width:Z,height:ye,status:1,toolbar:0,menubar:0,resizable:1,scrollbars:1},Y));var Sr=Object.keys(Y).map(function(rr){if(Y[rr]!=null)return rr+"="+Br(Y[rr])}).filter(Boolean).join(","),Be;try{Be=window.open("",ge,Sr)}catch(rr){throw new Bn("Can not open popup window - "+(rr.stack||rr.message))}if(fe(Be))throw new Bn("Can not open popup window - blocked");return re&&window.addEventListener("unload",function(){return Be.close()}),Be}(0,_({name:j,width:ee,height:K},ar().popup));return P.register(function(){return mt(we)}),P.register(function(){return so(we)}),we}throw new Error("No render context available for "+w)}).then(function(q){return C.setWindow(q,{send:Ye}),C.setName(j).then(function(){return C})})},Oo=function(){return p.try(function(){var w=Tt(window,"unload",ln(function(){Kr(new Error("Window navigated away"))})),E=wt(a,Kr,3e3);if(P.register(E.cancel),P.register(w.cancel),B)return B()})},Co=function(w){var E=!1;return w.isClosed().then(function(C){return C?(E=!0,mr(new Error("Detected component window close"))):p.delay(200).then(function(){return w.isClosed()}).then(function(x){if(x)return E=!0,mr(new Error("Detected component window close"))})}).then(function(){return E})},_r=function(w){return lr?lr(w):p.try(function(){if(F.indexOf(w)===-1)return F.push(w),O.asyncReject(w),N.trigger(he.ERROR,w)})},Wo=new p,So=function(w){return p.try(function(){Wo.resolve(w)})};bo.onError=_r;var Do=function(w,E){return w({uid:r,container:E.container,context:E.context,doc:E.doc,frame:E.frame,prerenderFrame:E.prerenderFrame,focus:Ar,close:mr,state:D,props:S,tag:d,dimensions:Pe(),event:N})},Ro=function(w,E){var C=E.context;return pr?pr(w,{context:C}):p.try(function(){if(c){var x=w.getWindow();if(x&&ie(x)&&function(se){try{if(!se.location.href||se.location.href==="about:blank")return!0}catch{}return!1}(x)){var j=(x=qe(x)).document,q=Do(c,{context:C,doc:j});if(q){if(q.ownerDocument!==j)throw new Error("Expected prerender template to have been created with document from child window");(function(se,re){var ze=re.tagName.toLowerCase();if(ze!=="html")throw new Error("Expected element to be html, got "+ze);for(var ge=se.document.documentElement,Z=0,ye=Un(ge.children);Z<ye.length;Z++)ge.removeChild(ye[Z]);for(var Te=0,be=Un(re.children);Te<be.length;Te++)ge.appendChild(be[Te])})(x,q);var te=v.width,ee=te!==void 0&&te,Se=v.height,K=Se!==void 0&&Se,we=v.element,ce=we===void 0?"body":we;if((ce=mn(ce,j))&&(ee||K)){var Y=Mt(ce,function(se){it({width:ee?se.width:void 0,height:K?se.height:void 0})},{width:ee,height:K,win:x});N.on(he.RENDERED,Y.cancel)}}}}})},No=function(w,E){var C=E.proxyFrame,x=E.proxyPrerenderFrame,j=E.context,q=E.rerender;return br?br(w,{proxyFrame:C,proxyPrerenderFrame:x,context:j,rerender:q}):p.hash({container:w.get(),frame:C?C.get():null,prerenderFrame:x?x.get():null,internalState:Ne()}).then(function(te){var ee=te.container,Se=te.internalState.visible,K=Do(u,{context:j,container:ee,frame:te.frame,prerenderFrame:te.prerenderFrame,doc:document});if(K){Se||zt(K),Jo(ee,K);var we=function(ce,Y){Y=ln(Y);var se=!1,re=[],ze,ge,Z,ye=function(){se=!0;for(var Be=0;Be<re.length;Be++)re[Be].disconnect();ze&&ze.cancel(),Z&&Z.removeEventListener("unload",Te),ge&&Hr(ge)},Te=function(){se||(Y(),ye())};if(yn(ce))return Te(),{cancel:ye};if(window.MutationObserver)for(var be=ce.parentElement;be;){var Sr=new window.MutationObserver(function(){yn(ce)&&Te()});Sr.observe(be,{childList:!0}),re.push(Sr),be=be.parentElement}return(ge=document.createElement("iframe")).setAttribute("name","__detect_close_"+Re()+"__"),ge.style.display="none",qn(ge).then(function(Be){(Z=qe(Be)).addEventListener("unload",Te)}),ce.appendChild(ge),ze=qr(function(){yn(ce)&&Te()},1e3),{cancel:ye}}(K,function(){var ce=new Error("Detected container element removed from DOM");return p.delay(1).then(function(){if(!yn(K))return P.all(ce),q().then(ve,ue);mr(ce)})});return P.register(function(){return we.cancel()}),P.register(function(){return Hr(K)}),z=xn(K)}})},Io=function(){return{state:D,event:N,close:mr,focus:Ar,resize:it,onError:_r,updateProps:mi,show:Ae,hide:Je}},at=function(w){w===void 0&&(w={});var E=ke,C=Io();Ir(W,w),function(x,j,q,te,ee){var Se=te.state,K=te.close,we=te.focus,ce=te.event,Y=te.onError;nt(q,x,function(se,re,ze){var ge=!1,Z=ze;Object.defineProperty(j,se,{configurable:!0,enumerable:!0,get:function(){return ge?Z:(ge=!0,function(){if(!re)return Z;var ye=re.alias;if(ye&&!dr(ze)&&dr(q[ye])&&(Z=q[ye]),re.value&&(Z=re.value({props:j,state:Se,close:K,focus:we,event:ce,onError:Y,container:ee})),!re.default||dr(Z)||dr(q[se])||(Z=re.default({props:j,state:Se,close:K,focus:we,event:ce,onError:Y,container:ee})),dr(Z)){if(re.type===k.ARRAY?!Array.isArray(Z):typeof Z!==re.type)throw new TypeError("Prop is not of type "+re.type+": "+se)}else if(re.required!==!1&&!dr(q[se]))throw new Error('Expected prop "'+se+'" to be defined');return dr(Z)&&re.decorate&&(Z=re.decorate({value:Z,props:j,state:Se,close:K,focus:we,event:ce,onError:Y,container:ee})),Z}())}})}),nt(j,x,ne)}(s,S,W,C,E)},mi=function(w){return at(w),O.then(function(){var E=ae,C=J;if(E&&C&&_e)return We(_e).then(function(x){return E.updateProps(x).catch(function(j){return Co(C).then(function(q){if(!q)throw j})})})})},Ao=function(w){return ir?ir(w):p.try(function(){return Nt(w)}).then(function(E){return $n(E)&&(E=function C(x){var j=function(Se){var K=function(we){for(;we.parentNode;)we=we.parentNode;if($n(we))return we}(Se);if(K&&K.host)return K.host}(x);if(!j)throw new Error("Element is not in shadow dom");var q="shadow-slot-"+Re(),te=document.createElement("slot");te.setAttribute("name",q),x.appendChild(te);var ee=document.createElement("div");return ee.setAttribute("slot",q),j.appendChild(ee),$n(j)?C(ee):ee}(E)),ke=E,xn(E)})};return{init:function(){(function(){N.on(he.RENDER,function(){return S.onRender()}),N.on(he.DISPLAY,function(){return S.onDisplay()}),N.on(he.RENDERED,function(){return S.onRendered()}),N.on(he.CLOSE,function(){return S.onClose()}),N.on(he.DESTROY,function(){return S.onDestroy()}),N.on(he.RESIZE,function(){return S.onResize()}),N.on(he.FOCUS,function(){return S.onFocus()}),N.on(he.PROPS,function(w){return S.onProps(w)}),N.on(he.ERROR,function(w){return S&&S.onError?S.onError(w):ue(w).then(function(){setTimeout(function(){throw w},1)})}),P.register(N.reset)})()},render:function(w){var E=w.target,C=w.container,x=w.context,j=w.rerender;return p.try(function(){var q=Vr(),te=g||Vr();(function(R,Ee,de){if(R!==window){if(!cn(window,R))throw new Error("Can only renderTo an adjacent frame");var xe=V();if(!$e(Ee,xe)&&!ie(R))throw new Error("Can not render remotely to "+Ee.toString()+" - can only render to "+xe);if(de&&typeof de!="string")throw new Error("Container passed to renderTo must be a string selector, got "+typeof de+" }")}})(E,te,C);var ee=p.try(function(){if(E!==window)return function(R,Ee){for(var de={},xe=0,Me=Object.keys(S);xe<Me.length;xe++){var pe=Me[xe],nr=s[pe];nr&&nr.allowDelegate&&(de[pe]=S[pe])}var Oe=Ye(Ee,"zoid_delegate_"+f,{uid:r,overrides:{props:de,event:N,close:mr,onError:_r,getInternalState:Ne,setInternalState:me,resolveInitPromise:ve,rejectInitPromise:ue}}).then(function(A){var T=A.data.parent;return P.register(function(y){if(!fe(Ee))return T.destroy(y)}),T.getDelegateOverrides()}).catch(function(A){throw new Error(`Unable to delegate rendering. Possibly the component is not loaded in the target window.

`+Nr(A))});return ir=function(){for(var A=arguments.length,T=new Array(A),y=0;y<A;y++)T[y]=arguments[y];return Oe.then(function(M){return M.getProxyContainer.apply(M,T)})},br=function(){for(var A=arguments.length,T=new Array(A),y=0;y<A;y++)T[y]=arguments[y];return Oe.then(function(M){return M.renderContainer.apply(M,T)})},Ve=function(){for(var A=arguments.length,T=new Array(A),y=0;y<A;y++)T[y]=arguments[y];return Oe.then(function(M){return M.show.apply(M,T)})},er=function(){for(var A=arguments.length,T=new Array(A),y=0;y<A;y++)T[y]=arguments[y];return Oe.then(function(M){return M.hide.apply(M,T)})},B=function(){for(var A=arguments.length,T=new Array(A),y=0;y<A;y++)T[y]=arguments[y];return Oe.then(function(M){return M.watchForUnload.apply(M,T)})},R===le.IFRAME?(vr=function(){for(var A=arguments.length,T=new Array(A),y=0;y<A;y++)T[y]=arguments[y];return Oe.then(function(M){return M.getProxyWindow.apply(M,T)})},xr=function(){for(var A=arguments.length,T=new Array(A),y=0;y<A;y++)T[y]=arguments[y];return Oe.then(function(M){return M.openFrame.apply(M,T)})},wr=function(){for(var A=arguments.length,T=new Array(A),y=0;y<A;y++)T[y]=arguments[y];return Oe.then(function(M){return M.openPrerenderFrame.apply(M,T)})},pr=function(){for(var A=arguments.length,T=new Array(A),y=0;y<A;y++)T[y]=arguments[y];return Oe.then(function(M){return M.prerender.apply(M,T)})},Or=function(){for(var A=arguments.length,T=new Array(A),y=0;y<A;y++)T[y]=arguments[y];return Oe.then(function(M){return M.open.apply(M,T)})},Cr=function(){for(var A=arguments.length,T=new Array(A),y=0;y<A;y++)T[y]=arguments[y];return Oe.then(function(M){return M.openPrerender.apply(M,T)})}):R===le.POPUP&&(Xe=function(){for(var A=arguments.length,T=new Array(A),y=0;y<A;y++)T[y]=arguments[y];return Oe.then(function(M){return M.setProxyWin.apply(M,T)})}),Oe}(x,E)}),Se=S.window,K=Oo(),we=go(s,S,"post"),ce=N.trigger(he.RENDER),Y=Ao(C),se=Ie(),re=Y.then(function(){return at()}),ze=re.then(function(){return go(s,S,"get").then(function(R){return function(Ee,de){var xe=de.query||{},Me=de.hash||{},pe,nr,Oe=Ee.split("#");nr=Oe[1];var A=(pe=Oe[0]).split("?");pe=A[0];var T=Dt(A[1],xe),y=Dt(nr,Me);return T&&(pe=pe+"?"+T),y&&(pe=pe+"#"+y),pe}(In(Le()),{query:R})})}),ge=se.then(function(R){return function(de){var xe=de===void 0?{}:de,Me=xe.proxyWin,pe=xe.initialChildDomain,nr=xe.childDomainMatch,Oe=xe.target,A=Oe===void 0?window:Oe,T=xe.context;return function(y){var M=y===void 0?{}:y,ut=M.proxyWin,Oi=M.childDomainMatch,Ci=M.context;return We(M.initialChildDomain).then(function(Wi){return{uid:r,context:Ci,tag:d,childDomainMatch:Oi,version:"9_0_86",props:Wi,exports:(Mo=ut,{init:function(Si){return bo(this.origin,Si)},close:mr,checkClose:function(){return Co(Mo)},resize:it,onError:_r,show:Ae,hide:Je,export:So})};var Mo})}({proxyWin:Me,initialChildDomain:pe,childDomainMatch:nr,context:T}).then(function(y){var M=lo({data:y,metaData:{windowRef:Qr(A,pe,T,Me)},sender:{domain:V(window)},receiver:{win:Me,domain:nr},passByReference:pe===V()}),ut=M.serializedData;return P.register(M.cleanReference),ut})}({proxyWin:(Ee={proxyWin:R,initialChildDomain:q,childDomainMatch:te,target:E,context:x}).proxyWin,initialChildDomain:Ee.initialChildDomain,childDomainMatch:Ee.childDomainMatch,target:Ee.target,context:Ee.context}).then(function(de){return vo({name:f,serializedPayload:de})});var Ee}),Z=ge.then(function(R){return Wr(x,{windowName:R})}),ye=ur(x),Te=p.hash({proxyContainer:Y,proxyFrame:Z,proxyPrerenderFrame:ye}).then(function(R){return No(R.proxyContainer,{context:x,proxyFrame:R.proxyFrame,proxyPrerenderFrame:R.proxyPrerenderFrame,rerender:j})}).then(function(R){return R}),be=p.hash({windowName:ge,proxyFrame:Z,proxyWin:se}).then(function(R){var Ee=R.proxyWin;return Se?Ee:xo(x,{windowName:R.windowName,proxyWin:Ee,proxyFrame:R.proxyFrame})}),Sr=p.hash({proxyWin:be,proxyPrerenderFrame:ye}).then(function(R){return Xr(x,R.proxyWin,R.proxyPrerenderFrame)}),Be=be.then(function(R){return J=R,je(R)}),rr=p.hash({proxyPrerenderWin:Sr,state:Be}).then(function(R){return Ro(R.proxyPrerenderWin,{context:x})}),To=p.hash({proxyWin:be,windowName:ge}).then(function(R){if(Se)return R.proxyWin.setName(R.windowName)}),gi=p.hash({body:we}).then(function(R){return n.method?n.method:Object.keys(R.body).length?"post":"get"}),zo=p.hash({proxyWin:be,windowUrl:ze,body:we,method:gi,windowName:To,prerender:rr}).then(function(R){return R.proxyWin.setLocation(R.windowUrl,{method:R.method,body:R.body})}),yi=be.then(function(R){(function Ee(de,xe){var Me=!1;return P.register(function(){Me=!0}),p.delay(2e3).then(function(){return de.isClosed()}).then(function(pe){if(!Me)return pe?mr(new Error("Detected "+xe+" close")):Ee(de,xe)})})(R,x)}),Ei=p.hash({container:Te,prerender:rr}).then(function(){return N.trigger(he.DISPLAY)}),Pi=be.then(function(R){return function(Ee,de,xe){return p.try(function(){return Ee.awaitWindow()}).then(function(Me){if(fr&&fr.needsBridge({win:Me,domain:de})&&!fr.hasBridge(de,de)){var pe=typeof n.bridgeUrl=="function"?n.bridgeUrl({props:S}):n.bridgeUrl;if(!pe)throw new Error("Bridge needed to render "+xe);var nr=tr(pe);return fr.linkUrl(Me,de),fr.openBridge(In(pe),nr)}})}(R,q,x)}),bi=zo.then(function(){return p.try(function(){var R=S.timeout;if(R)return O.timeout(R,new Error("Loading component timed out after "+R+" milliseconds"))})}),xi=O.then(function(){return N.trigger(he.RENDERED)});return p.hash({initPromise:O,buildUrlPromise:ze,onRenderPromise:ce,getProxyContainerPromise:Y,openFramePromise:Z,openPrerenderFramePromise:ye,renderContainerPromise:Te,openPromise:be,openPrerenderPromise:Sr,setStatePromise:Be,prerenderPromise:rr,loadUrlPromise:zo,buildWindowNamePromise:ge,setWindowNamePromise:To,watchForClosePromise:yi,onDisplayPromise:Ei,openBridgePromise:Pi,runTimeoutPromise:bi,onRenderedPromise:xi,delegatePromise:ee,watchForUnloadPromise:K,finalSetPropsPromise:re})}).catch(function(q){return p.all([_r(q),Kr(q)]).then(function(){throw q},function(){throw q})}).then(ne)},destroy:Kr,getProps:function(){return S},setProps:at,export:So,getHelpers:Io,getDelegateOverrides:function(){return p.try(function(){return{getProxyContainer:Ao,show:Ae,hide:Je,renderContainer:No,getProxyWindow:Ie,watchForUnload:Oo,openFrame:Wr,openPrerenderFrame:ur,prerender:Ro,open:xo,openPrerender:Xr,setProxyWin:je}})},getExports:function(){return b({getExports:function(){return Wo}})}}}var ui={register:function(e,r,n,t){var o=t.React,i=t.ReactDOM;return function(a){oe(s,a);function s(){return a.apply(this,arguments)||this}var u=s.prototype;return u.render=function(){return o.createElement("div",null)},u.componentDidMount=function(){var c=i.findDOMNode(this),d=n(Ir({},this.props));d.render(c,le.IFRAME),this.setState({parent:d})},u.componentDidUpdate=function(){this.state&&this.state.parent&&this.state.parent.updateProps(Ir({},this.props)).catch(ne)},s}(o.Component)}},ci={register:function(e,r,n,t){return t.component(e,{render:function(o){return o("div")},inheritAttrs:!1,mounted:function(){var o=this.$el;this.parent=n(_({},(i=this.$attrs,Object.keys(i).reduce(function(a,s){var u=i[s];return s==="style-object"||s==="styleObject"?(a.style=u,a.styleObject=u):s.includes("-")?a[Fn(s)]=u:a[s]=u,a},{}))));var i;this.parent.render(o,le.IFRAME)},watch:{$attrs:{handler:function(){this.parent&&this.$attrs&&this.parent.updateProps(_({},this.$attrs)).catch(ne)},deep:!0}}})}},si={register:function(e,r,n){return{template:"<div></div>",inheritAttrs:!1,mounted:function(){var t=this.$el;this.parent=n(_({},(o=this.$attrs,Object.keys(o).reduce(function(i,a){var s=o[a];return a==="style-object"||a==="styleObject"?(i.style=s,i.styleObject=s):a.includes("-")?i[Fn(a)]=s:i[a]=s,i},{}))));var o;this.parent.render(t,le.IFRAME)},watch:{$attrs:{handler:function(){this.parent&&this.$attrs&&this.parent.updateProps(_({},this.$attrs)).catch(ne)},deep:!0}}}}},di={register:function(e,r,n,t){return t.module(e,[]).directive(Fn(e),function(){for(var o={},i=0,a=Object.keys(r);i<a.length;i++)o[a[i]]="=";return o.props="=",{scope:o,restrict:"E",controller:["$scope","$element",function(s,u){function c(){if(s.$root.$$phase!=="$apply"&&s.$root.$$phase!=="$digest")try{s.$apply()}catch{}}var d=function(){return hn(s.props,function(l){return typeof l=="function"?function(){var h=l.apply(this,arguments);return c(),h}:l})},f=n(d());f.render(u[0],le.IFRAME),s.$watch(function(){f.updateProps(d()).catch(ne)})}]}})}},fi={register:function(e,r,n,t){var o=t.Component,i=t.NgModule,a=t.ElementRef,s=t.NgZone,u=t.Inject,c=function(){function f(h,v){this.elementRef=void 0,this.internalProps=void 0,this.parent=void 0,this.props=void 0,this.zone=void 0,this._props=void 0,this._props={},this.elementRef=h,this.zone=v}var l=f.prototype;return l.getProps=function(){var h=this;return hn(_({},this.internalProps,this.props),function(v){if(typeof v=="function"){var m=h.zone;return function(){var g=arguments,b=this;return m.run(function(){return v.apply(b,g)})}}return v})},l.ngOnInit=function(){var h=this.elementRef.nativeElement;this.parent=n(this.getProps()),this.parent.render(h,le.IFRAME)},l.ngDoCheck=function(){this.parent&&!function(h,v){var m={};for(var g in h)if(h.hasOwnProperty(g)&&(m[g]=!0,h[g]!==v[g]))return!1;for(var b in v)if(!m[b])return!1;return!0}(this._props,this.props)&&(this._props=_({},this.props),this.parent.updateProps(this.getProps()))},f}();c.annotations=void 0,c.parameters=void 0,c.parameters=[[new u(a)],[new u(s)]],c.annotations=[new o({selector:e,template:"<div></div>",inputs:["props"]})];var d=function(){};return d.annotations=void 0,d.annotations=[new i({declarations:[c],exports:[c]})],d}};function li(e){var r=e.uid,n=e.frame,t=e.prerenderFrame,o=e.doc,i=e.props,a=e.event,s=e.dimensions,u=s.width,c=s.height;if(n&&t){var d=o.createElement("div");d.setAttribute("id",r);var f=o.createElement("style");return i.cspNonce&&f.setAttribute("nonce",i.cspNonce),f.appendChild(o.createTextNode(`
            #`+r+` {
                display: inline-block;
                position: relative;
                width: `+u+`;
                height: `+c+`;
            }

            #`+r+` > iframe {
                display: inline-block;
                position: absolute;
                width: 100%;
                height: 100%;
                top: 0;
                left: 0;
                transition: opacity .2s ease-in-out;
            }

            #`+r+` > iframe.zoid-invisible {
                opacity: 0;
            }

            #`+r+` > iframe.zoid-visible {
                opacity: 1;
        }
        `)),d.appendChild(n),d.appendChild(t),d.appendChild(f),t.classList.add("zoid-visible"),n.classList.add("zoid-invisible"),a.on(he.RENDERED,function(){t.classList.remove("zoid-visible"),t.classList.add("zoid-invisible"),n.classList.remove("zoid-invisible"),n.classList.add("zoid-visible"),setTimeout(function(){Hr(t)},1)}),a.on(he.RESIZE,function(l){var h=l.width,v=l.height;typeof h=="number"&&(d.style.width=jt(h)),typeof v=="number"&&(d.style.height=jt(v))}),d}}function hi(e){var r=e.doc,n=e.props,t=r.createElement("html"),o=r.createElement("body"),i=r.createElement("style"),a=r.createElement("div");return a.classList.add("spinner"),n.cspNonce&&i.setAttribute("nonce",n.cspNonce),t.appendChild(o),o.appendChild(a),o.appendChild(i),i.appendChild(r.createTextNode(`
            html, body {
                width: 100%;
                height: 100%;
            }

            .spinner {
                position: fixed;
                max-height: 60vmin;
                max-width: 60vmin;
                height: 40px;
                width: 40px;
                top: 50%;
                left: 50%;
                box-sizing: border-box;
                border: 3px solid rgba(0, 0, 0, .2);
                border-top-color: rgba(33, 128, 192, 0.8);
                border-radius: 100%;
                animation: rotation .7s infinite linear;
            }

            @keyframes rotation {
                from {
                    transform: translateX(-50%) translateY(-50%) rotate(0deg);
                }
                to {
                    transform: translateX(-50%) translateY(-50%) rotate(359deg);
                }
            }
        `)),t}var tt=vn(),ot=vn();function vi(e){var r=function(v){var m=v.tag,g=v.url,b=v.domain,O=v.bridgeUrl,F=v.props,P=F===void 0?{}:F,D=v.dimensions,W=D===void 0?{}:D,U=v.autoResize,N=U===void 0?{}:U,X=v.allowedParentDomains,L=X===void 0?"*":X,I=v.attributes,S=I===void 0?{}:I,J=v.defaultContext,z=J===void 0?le.IFRAME:J,ae=v.containerTemplate,_e=ae===void 0?li:ae,ke=v.prerenderTemplate,lr=ke===void 0?hi:ke,ir=v.validate,Ve=v.eligible,er=Ve===void 0?function(){return{eligible:!0}}:Ve,hr=v.logger,br=hr===void 0?{info:ne}:hr,vr=v.exports,Xe=vr===void 0?ne:vr,xr=v.method,wr=v.children,pr=wr===void 0?function(){return{}}:wr,Or=m.replace(/-/g,"_"),Cr=_({},{window:{type:k.OBJECT,sendToChild:!1,required:!1,allowDelegate:!0,validate:function(B){var He=B.value;if(!yr(He)&&!Ge.isProxyWindow(He))throw new Error("Expected Window or ProxyWindow");if(yr(He)){if(fe(He))throw new Error("Window is closed");if(!ie(He))throw new Error("Window is not same domain")}},decorate:function(B){return Zr(B.value)}},timeout:{type:k.NUMBER,required:!1,sendToChild:!1},cspNonce:{type:k.STRING,required:!1},onDisplay:{type:k.FUNCTION,required:!1,sendToChild:!1,allowDelegate:!0,default:Pr,decorate:Yr},onRendered:{type:k.FUNCTION,required:!1,sendToChild:!1,default:Pr,decorate:Yr},onRender:{type:k.FUNCTION,required:!1,sendToChild:!1,default:Pr,decorate:Yr},onClose:{type:k.FUNCTION,required:!1,sendToChild:!1,allowDelegate:!0,default:Pr,decorate:Yr},onDestroy:{type:k.FUNCTION,required:!1,sendToChild:!1,allowDelegate:!0,default:Pr,decorate:Yr},onResize:{type:k.FUNCTION,required:!1,sendToChild:!1,allowDelegate:!0,default:Pr},onFocus:{type:k.FUNCTION,required:!1,sendToChild:!1,allowDelegate:!0,default:Pr},close:{type:k.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(B){return B.close}},focus:{type:k.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(B){return B.focus}},resize:{type:k.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(B){return B.resize}},uid:{type:k.STRING,required:!1,sendToChild:!1,childDecorate:function(B){return B.uid}},tag:{type:k.STRING,required:!1,sendToChild:!1,childDecorate:function(B){return B.tag}},getParent:{type:k.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(B){return B.getParent}},getParentDomain:{type:k.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(B){return B.getParentDomain}},show:{type:k.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(B){return B.show}},hide:{type:k.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(B){return B.hide}},export:{type:k.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(B){return B.export}},onError:{type:k.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(B){return B.onError}},onProps:{type:k.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(B){return B.onProps}},getSiblings:{type:k.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(B){return B.getSiblings}}},P);if(!_e)throw new Error("Container template required");return{name:Or,tag:m,url:g,domain:b,bridgeUrl:O,method:xr,propsDef:Cr,dimensions:W,autoResize:N,allowedParentDomains:L,attributes:S,defaultContext:z,containerTemplate:_e,prerenderTemplate:lr,validate:ir,logger:br,eligible:er,children:pr,exports:typeof Xe=="function"?Xe:function(B){for(var He=B.getExports,H={},Pe=function(We,Ne){var me=Ne[We],Ie=Xe[me].type,je=He().then(function(Ae){return Ae[me]});H[me]=Ie===k.FUNCTION?function(){for(var Ae=arguments.length,Je=new Array(Ae),Le=0;Le<Ae;Le++)Je[Le]=arguments[Le];return je.then(function(ar){return ar.apply(void 0,Je)})}:je},ve=0,ue=Object.keys(Xe);ve<ue.length;ve++)Pe(ve,ue);return H}}}(e),n=r.name,t=r.tag,o=r.defaultContext,i=r.propsDef,a=r.eligible,s=r.children,u=Gr(window),c={},d=[],f=function(){if(function(m){try{return rt(window.name).name===m}catch{}return!1}(n)){var v=wo().payload;if(v.tag===t&&$e(v.childDomainMatch,V()))return!0}return!1},l=sr(function(){if(f()){if(window.xprops)throw delete u.components[t],new Error("Can not register "+n+" as child - child already registered");var v=function(m){var g=m.tag,b=m.propsDef,O=m.autoResize,F=m.allowedParentDomains,P=[],D=wo(),W=D.parent,U=D.payload,N=W.win,X=W.domain,L,I=new p,S=U.version,J=U.uid,z=U.exports,ae=U.context,_e=U.props;if(S!=="9_0_86")throw new Error("Parent window has zoid version "+S+", child window has version 9_0_86");var ke=z.show,lr=z.hide,ir=z.close,Ve=z.onError,er=z.checkClose,hr=z.export,br=z.resize,vr=z.init,Xe=function(){return N},xr=function(){return X},wr=function(H){return P.push(H),{cancel:function(){P.splice(P.indexOf(H),1)}}},pr=function(H){return br.fireAndForget({width:H.width,height:H.height})},Or=function(H){return I.resolve(H),hr(H)},Cr=function(H){var Pe=(H===void 0?{}:H).anyParent,ve=[],ue=L.parent;if(Pe===void 0&&(Pe=!ue),!Pe&&!ue)throw new Error("No parent found for "+g+" child");for(var We=0,Ne=Rr(window);We<Ne.length;We++){var me=Ne[We];if(ie(me)){var Ie=qe(me).xprops;if(Ie&&Xe()===Ie.getParent()){var je=Ie.parent;if(Pe||!ue||je&&je.uid===ue.uid){var Ae=fo(me,function(Je){return Je.exports});ve.push({props:Ie,exports:Ae})}}}}return ve},B=function(H,Pe,ve){ve===void 0&&(ve=!1);var ue=function(Ne,me,Ie,je,Ae,Je){Je===void 0&&(Je=!1);for(var Le={},ar=0,Vr=Object.keys(Ie);ar<Vr.length;ar++){var Wr=Vr[ar],ur=me[Wr];if(!ur||!ur.sameDomain||je===V(window)&&ie(Ne)){var Xr=po(me,0,Wr,Ie[Wr],Ae);Le[Wr]=Xr,ur&&ur.alias&&!Le[ur.alias]&&(Le[ur.alias]=Xr)}}if(!Je)for(var Ar=0,Cn=Object.keys(me);Ar<Cn.length;Ar++){var Qr=Cn[Ar];Ie.hasOwnProperty(Qr)||(Le[Qr]=po(me,0,Qr,void 0,Ae))}return Le}(N,b,H,Pe,{tag:g,show:ke,hide:lr,close:ir,focus:ai,onError:Ve,resize:pr,getSiblings:Cr,onProps:wr,getParent:Xe,getParentDomain:xr,uid:J,export:Or},ve);L?Ir(L,ue):L=ue;for(var We=0;We<P.length;We++)(0,P[We])(L)},He=function(H){return p.try(function(){return B(H,X,!0)})};return{init:function(){return p.try(function(){return ie(N)&&function(H){var Pe=H.componentName,ve=H.parentComponentWindow,ue=ho({data:rt(window.name).serializedInitialPayload,sender:{win:ve},basic:!0}),We=ue.sender;if(ue.reference.type==="uid"||ue.metaData.windowRef.type==="global"){var Ne=lo({data:ue.data,metaData:{windowRef:ii(ve)},sender:{domain:We.domain},receiver:{win:window,domain:V()},basic:!0});window.name=vo({name:Pe,serializedPayload:Ne.serializedData})}}({componentName:m.name,parentComponentWindow:N}),Gr(window).exports=m.exports({getExports:function(){return I}}),function(H,Pe){if(!$e(H,Pe))throw new Error("Can not be rendered by domain: "+Pe)}(F,X),Zt(N),function(){window.addEventListener("beforeunload",function(){er.fireAndForget()}),window.addEventListener("unload",function(){er.fireAndForget()}),wt(N,function(){mo()})}(),vr({updateProps:He,close:mo})}).then(function(){return(H=O.width,Pe=H!==void 0&&H,ve=O.height,ue=ve!==void 0&&ve,We=O.element,Nt(We===void 0?"body":We).catch(ne).then(function(Ne){return{width:Pe,height:ue,element:Ne}})).then(function(Ne){var me=Ne.width,Ie=Ne.height,je=Ne.element;je&&(me||Ie)&&ae!==le.POPUP&&Mt(je,function(Ae){pr({width:me?Ae.width:void 0,height:Ie?Ae.height:void 0})},{width:me,height:Ie})});var H,Pe,ve,ue,We}).catch(function(H){Ve(H)})},getProps:function(){return L||(B(_e,X),L)}}}(r);return v.init(),v}}),h=function v(m){var g,b="zoid-"+t+"-"+Re(),O=m||{},F=a({props:O}),P=F.eligible,D=F.reason,W=O.onDestroy;O.onDestroy=function(){if(g&&P&&d.splice(d.indexOf(g),1),W)return W.apply(void 0,arguments)};var U=yo({uid:b,options:r});U.init(),P?U.setProps(O):O.onDestroy&&O.onDestroy(),tt.register(function(L){return U.destroy(L||new Error("zoid destroyed all components"))});var N=function(L){var I=(L===void 0?{}:L).decorate;return v((I===void 0?$o:I)(O))},X=function(L,I,S){return p.try(function(){if(!P){var J=new Error(D||n+" component is not eligible");return U.destroy(J).then(function(){throw J})}if(!yr(L))throw new Error("Must pass window to renderTo");return function(z,ae){return p.try(function(){if(z.window)return Zr(z.window).getType();if(ae){if(ae!==le.IFRAME&&ae!==le.POPUP)throw new Error("Unrecognized context: "+ae);return ae}return o})}(O,S)}).then(function(J){if(I=function(z,ae){if(ae){if(typeof ae!="string"&&!Rt(ae))throw new TypeError("Expected string or element selector to be passed");return ae}if(z===le.POPUP)return"body";throw new Error("Expected element to be passed to render iframe")}(J,I),L!==window&&typeof I!="string")throw new Error("Must pass string element when rendering to another window");return U.render({target:L,container:I,context:J,rerender:function(){var z=N();return Ir(g,z),z.renderTo(L,I,S)}})}).catch(function(J){return U.destroy(J).then(function(){throw J})})};return g=_({},U.getExports(),U.getHelpers(),function(){for(var L=s(),I={},S=function(ae,_e){var ke=_e[ae],lr=L[ke];I[ke]=function(ir){var Ve=U.getProps(),er=_({},ir,{parent:{uid:b,props:Ve,export:U.export}});return lr(er)}},J=0,z=Object.keys(L);J<z.length;J++)S(J,z);return I}(),{isEligible:function(){return P},clone:N,render:function(L,I){return X(window,L,I)},renderTo:function(L,I,S){return X(L,I,S)}}),P&&d.push(g),g};if(l(),function(){var v=or("zoid_allow_delegate_"+n,function(){return!0}),m=or("zoid_delegate_"+n,function(g){var b=g.data;return{parent:yo({uid:b.uid,options:r,overrides:b.overrides,parentWin:g.source})}});ot.register(v.cancel),ot.register(m.cancel)}(),u.components=u.components||{},u.components[t])throw new Error("Can not register multiple components with the same tag: "+t);return u.components[t]=!0,{init:h,instances:d,driver:function(v,m){var g={react:ui,angular:di,vue:ci,vue3:si,angular2:fi};if(!g[v])throw new Error("Could not find driver for framework: "+v);return c[v]||(c[v]=g[v].register(t,i,h,m)),c[v]},isChild:f,canRenderTo:function(v){return Ye(v,"zoid_allow_delegate_"+n).then(function(m){return m.data}).catch(function(){return!1})},registerChild:l}}var wi=function(e){(function(){Ke().initialized||(Ke().initialized=!0,i=(o={on:or,send:Ye}).on,a=o.send,(s=Ke()).receiveMessage=s.receiveMessage||function(u){return kn(u,{on:i,send:a})},function(u){var c=u.on,d=u.send;G().getOrSet("postMessageListener",function(){return Tt(window,"message",function(f){(function(l,h){var v=h.on,m=h.send;p.try(function(){var g=l.source||l.sourceElement,b=l.origin||l.originalEvent&&l.originalEvent.origin,O=l.data;if(b==="null"&&(b="file://"),g){if(!b)throw new Error("Post message did not have origin domain");kn({source:g,origin:b,data:O},{on:v,send:m})}})})(f,{on:c,send:d})})})}({on:or,send:Ye}),kt({on:or,send:Ye,receiveMessage:kn}),function(u){var c=u.on,d=u.send;G("builtinListeners").getOrSet("helloListener",function(){var f=c("postrobot_hello",{domain:"*"},function(h){return $t(h.source,{domain:h.origin}),{instanceID:qt()}}),l=jr();return l&&Jn(l,{send:d}).catch(function(h){}),f})}({on:or,send:Ye}));var o,i,a,s})();var r=vi(e),n=function(o){return r.init(o)};n.driver=function(o,i){return r.driver(o,i)},n.isChild=function(){return r.isChild()},n.canRenderTo=function(o){return r.canRenderTo(o)},n.instances=r.instances;var t=r.registerChild();return t&&(window.xprops=n.xprops=t.getProps()),n};function Eo(e){fr&&fr.destroyBridges();var r=tt.all(e);return tt=vn(),r}var Po=Eo;function pi(e){return Po(),delete window.__zoid_9_0_86__,function(){(function(){for(var n=G("responseListeners"),t=0,o=n.keys();t<o.length;t++){var i=o[t],a=n.get(i);a&&(a.cancelled=!0),n.del(i)}})(),(r=G().get("postMessageListener"))&&r.cancel();var r;delete window.__post_robot_10_0_44__}(),ot.all(e)}}])})})(Fo);var Ri=Fo.exports;const Uo=Ri.create({tag:"my-component",url:"https://raw.githubusercontent.com/pietrorosa77/testimages/main/ExternalDummbotTest.js"});window.ExternalDummbotTest=Uo;module.exports=Uo;
